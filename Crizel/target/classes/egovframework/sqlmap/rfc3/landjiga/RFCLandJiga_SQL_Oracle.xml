<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="RFCLandJigaManage">
	<cacheModel type="${Globals.ibatis.default.cache}" id="RFCLandJigaManageCache" readOnly="true" serialize="false">
      <flushInterval hours="24" />
      	<!-- <flushOnExecute statement="buyDAO.insertBuyGoodsDetail"/> -->
     </cacheModel>
    <typeAlias  alias="egovMap"      type = "egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="landVO" type = "egovframework.rfc3.landjiga.vo.LandVO"/>
	<typeAlias  alias="jigaVO" type = "egovframework.rfc3.landjiga.vo.JigaVO"/>
	
	<select id="landJigaDAO.getLand"  parameterClass="landVO" resultClass="landVO" cacheModel="RFCLandJigaManageCache">
		SELECT
			SEQNO seqNo,
			LAND_CD landCd,
			SIDOSGG_CD sidosggCd,
			UMD_CD umdCd,
			ADMD_CD admdCd,
			RI_CD riCd,
			LAND_GBN landGbn,
			LAND_BOBN landBobn,
			LAND_BUBN landBubn,
			BASE_MON baseMon,
			HPRICE hprice,
			YEAR year
		FROM
			RFC_COMTNLAND
		WHERE
			LAND_CD LIKE '%$landCd$%' AND LAND_BOBN = #landBobn# AND LAND_BUBN = #landBubn# AND YEAR = #year#
			<isNotEmpty  property="landGbn" prepend="AND">
				LAND_GBN  = #landGbn# 
			</isNotEmpty> 
	</select>	
	
	<select id="landJigaDAO.getLandList"  parameterClass="landVO" resultClass="landVO" cacheModel="RFCLandJigaManageCache">
		SELECT
			SEQNO seqNo,
			LAND_CD landCd,
			SIDOSGG_CD sidosggCd,
			UMD_CD umdCd,
			ADMD_CD admdCd,
			RI_CD riCd,
			LAND_GBN landGbn,
			LAND_BOBN landBobn,
			LAND_BUBN landBubn,
			BASE_MON baseMon,
			HPRICE hprice,
			YEAR year
		FROM
			RFC_COMTNLAND
		WHERE
			LAND_CD LIKE '%$landCd$%' AND LAND_BOBN = #landBobn# AND LAND_BUBN = #landBubn# AND YEAR &lt;= #year#
			<isNotEmpty  property="landGbn" prepend="AND">
				LAND_GBN  = #landGbn# 
			</isNotEmpty>
		ORDER BY YEAR DESC
	</select>	
	
	<select id="landJigaDAO.getLandYear" parameterClass="landVO"  resultClass="string" cacheModel="RFCLandJigaManageCache">
		SELECT
    		DISTINCT(YEAR) year
		FROM
		    RFC_COMTNLAND
		ORDER BY
			YEAR DESC
	</select>	
	
	<insert id="landJigaDAO.insertLand"  parameterClass="landVO">
		INSERT INTO RFC_COMTNLAND
		(
			SEQNO,
			LAND_CD,
			SIDOSGG_CD,
			UMD_CD,
			ADMD_CD,
			RI_CD,
			LAND_GBN,
			LAND_BOBN,
			LAND_BUBN,
			BASE_MON,
			HPRICE,
			YEAR
		)
		VALUES
		(
			#seqNo#,
			#landCd#,
			#sidosggCd#,
			#umdCd#,
			#admdCd#,
			#riCd#,
			#landGbn#,
			#landBobn#,
			#landBubn#,
			#baseMon#,
			#hprice#,
			#year#
		)
	</insert>
	
	
	<select id="landJigaDAO.getJiga"  parameterClass="jigaVO" resultClass="jigaVO" cacheModel="RFCLandJigaManageCache">
		SELECT
			CNO cno,
			LAND_CD landCd,
			YEAR year,
			JIGA jiga,
			BASE_MON baseMon,
			PYO_YN pyoYn
		FROM
			RFC_COMTNJIGA
		WHERE
			LAND_CD = #landCd# AND YEAR = #year#
	</select>
	<select id="landJigaDAO.getJigaList"  parameterClass="jigaVO" resultClass="jigaVO" cacheModel="RFCLandJigaManageCache">
		SELECT
			CNO cno,
			LAND_CD landCd,
			YEAR year,
			JIGA jiga,
			BASE_MON baseMon,
			PYO_YN pyoYn
		FROM
			RFC_COMTNJIGA
		WHERE
			LAND_CD = #landCd# AND YEAR &lt;= #year#
		ORDER BY YEAR DESC
	</select>
	<select id="landJigaDAO.getJigaYear" parameterClass="jigaVO" resultClass="string" cacheModel="RFCLandJigaManageCache">
		SELECT
    		DISTINCT(YEAR) year
		FROM
		    RFC_COMTNJIGA
		ORDER BY
			YEAR DESC
	</select>
	<insert id="landJigaDAO.insertJiga"  parameterClass="jigaVO">
		INSERT INTO RFC_COMTNJIGA
		(
			CNO,
			LAND_CD,
			YEAR,
			JIGA,
			BASE_MON,
			PYO_YN
		)
		VALUES
		(
			#cno#,
			#landCd#,
			#year#,
			#jiga#,
			#baseMon#,
			#pyoYn#
		)
	</insert>
</sqlMap>