<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="RFCOffice">
	 <typeAlias  alias="egovMap"      type = "egovframework.rte.psl.dataaccess.util.EgovMap"/>
     <typeAlias  alias="officeVO" type = "egovframework.rfc3.office.vo.OfficeVO"/>
     <typeAlias  alias="eminwonOfficeVO" type = "egovframework.rfc3.office.vo.EminwonOfficeVO"/>
     
     <resultMap id="office" class="egovframework.rfc3.office.vo.OfficeVO">
        <result property="officeCd" column="officeCd" />
        <result property="sgroupId" column="sgroupId" />
        <result property="officeNm" column="officeNm" />
        <result property="officeDp" column="officeDp" />
        <result property="officeSortIx" column="officeSortIx" />
        <result property="officeParentCd" column="officeParentCd"/>
        <result property="officeImg" column="officeImg"/>
        <result property="officeMemo" column="officeMemo"/>
        <result property="officeTel" column="officeTel"/>
        <result property="officeFax" column="officeFax"/>
        <result property="officeIsUse" column="officeIsUse"/>
        <result property="officeIsBoard" column="officeIsBoard"/>
        <result property="officeRealCode" column="officeRealCode"/>
		<result property="modify_dt" column="modify_dt"/>
        <result property="register_dt" column="register_dt"/>
        <result property="officeTmp" column="officeTmp"/>
    </resultMap>
   

	<resultMap id="realCode" class="egovframework.rfc3.office.vo.OfficeVO">
        <result property="officeRealCode" column="officeRealCode" />
    </resultMap>



      <cacheModel type="${Globals.ibatis.default.cache}" id="RFCOfficeCache" readOnly="true" serialize="false">
     	<flushInterval hours="24" />
     	<flushOnExecute statement="OfficeDAO.insertOffice"/>
     	<flushOnExecute statement="OfficeDAO.deleteOffice"/>
     	<flushOnExecute statement="OfficeDAO.updateOffice"/>
     	<flushOnExecute statement="OfficeDAO.updateOfficeReplace"/>
     	<flushOnExecute statement="OfficeDAO.updateOfficeIsUse"/>
     </cacheModel>
    
	<select id="OfficeDAO.selectOfficeListTotCnt"  parameterClass="officeVO" resultClass="int"  cacheModel="RFCOfficeCache">
						SELECT 
								COUNT(*) totcnt
						 FROM   RFC_COMTCOFFICE
						<dynamic prepend="WHERE">
						<isNotEmpty prepend="AND" property="sgroupId" >
			          		   SGROUP_ID   = #sgroupId#
			            </isNotEmpty>
			          
				        <isNotEqual prepend="AND"   property="officeDp"  compareValue='0' >
				            	  OFFICE_DP = #officeDp#
				         </isNotEqual>
				        <isNotEmpty prepend="AND" property="searchOffice" >
			          		    OFFICE_CD  = #searchOffice#
			            </isNotEmpty>

						 <!-- 새올행정 -->
							<isNotEmpty prepend="AND" property="tmpList" >
							(
								<iterate property="tmpList" open="OFFICE_REAL_CODE NOT IN (" close=")" conjunction=","> 
									#tmpList[]# 
								</iterate>
								
								OR OFFICE_REAL_CODE IS NULL  
                         		OR OFFICE_REAL_CODE=''
                         	)			
							</isNotEmpty>
			            <isNotEmpty prepend="AND" property="searchOfficeCondition" >
			          		    $searchOfficeCondition$  LIKE  '%$searchKeyword$%'
			            </isNotEmpty>
				         </dynamic>
	</select>
	

	<select id="OfficeDAO.selectOfficeList" parameterClass="officeVO"  resultMap="office"  cacheModel="RFCOfficeCache">
			          SELECT 
											OFFICE_CD						officeCd, 
											SGROUP_ID						sgroupId,
											OFFICE_NM						officeNm,
											OFFICE_DP						officeDp,
											OFFICE_SORT_IX				officeSortIx,
											OFFICE_PARENT_CD		officeParentCd,
											OFFICE_IMG						officeImg,
											OFFICE_MEMO					officeMemo,
											OFFICE_TEL						officeTel,		
											OFFICE_FAX						officeFax,
											OFFICE_IS_USE				officeIsUse,
											OFFICE_IS_BOARD			officeIsBoard,
											OFFICE_REAL_CODE		officeRealCode,
											HOMEOFFICE_IS_USE  		homeOfficeIsUse,
											MODIFY_DATE 			modify_dt,
			  				 				REGISTER_DATE 			register_dt,
			  				 				OFFICE_TMP 				officeTmp
					FROM RFC_COMTCOFFICE
					<dynamic  prepend="WHERE">
						<isNotEmpty prepend="AND"  property="sgroupId" >
			          		   SGROUP_ID   = #sgroupId#
			            </isNotEmpty>
			          
			            <isNotEqual prepend="AND"   property="officeDp"  compareValue='0' >
			            	  OFFICE_DP = #officeDp#
			            </isNotEqual>
			            <isNotEmpty prepend="AND" property="searchOffice" >
			          		    OFFICE_CD  = #searchOffice#
			            </isNotEmpty>
						 <!-- 새올행정 -->
							            <isNotEmpty prepend="AND" property="tmpList" >
							            (
											<iterate property="tmpList" open="OFFICE_REAL_CODE NOT IN (" close=")" conjunction=","> 
												#tmpList[]# 
											</iterate>
											
											OR OFFICE_REAL_CODE IS NULL  
                         					OR OFFICE_REAL_CODE=''
                         				)
										</isNotEmpty>
			            <isNotEmpty prepend="AND" property="searchOfficeCondition" >
			          		    $searchOfficeCondition$  LIKE  '%$searchKeyword$%'
			            </isNotEmpty>
			            <isNotEmpty  property="orderField" >
			            	  ORDER BY  $orderField$   $orderSort$
			            </isNotEmpty>
			            <isEmpty  property="orderField" >
			            	  ORDER BY  OFFICE_SORT_IX   ASC
			            </isEmpty>
			           </dynamic>
			              LIMIT #recordCountPerPage# OFFSET #firstIndex#
	</select>	
	
	<select id="OfficeDAO.selectOfficeListTotCntSaeol"  parameterClass="officeVO" resultClass="int"  cacheModel="RFCOfficeCache">
						SELECT 
								COUNT(*) totcnt
						 FROM   RFC_COMTCOFFICE
						<dynamic prepend="WHERE">
							<isNotEmpty prepend="AND"  property="sgroupId" >
				          		   SGROUP_ID   = #sgroupId#
				            </isNotEmpty>
				          
				            <isNotEqual prepend="AND"   property="officeDp"  compareValue='0' >
				            	  OFFICE_DP = #officeDp#
				            </isNotEqual>
				            <isNotEmpty prepend="AND" property="searchOffice" >
				          		    OFFICE_CD  = #searchOffice#
				            </isNotEmpty>
				            
				            <!-- 새올행정 -->
							<isNotEmpty prepend="AND" property="tmpList" >
							(
								<iterate property="tmpList" open="OFFICE_REAL_CODE NOT IN (" close=")" conjunction=","> 
									#tmpList[]# 
								</iterate>
								
								OR OFFICE_REAL_CODE IS NULL  
                         		OR OFFICE_REAL_CODE=''
                         	)			
							</isNotEmpty>
										
				            <isNotEmpty prepend="AND" property="searchOfficeCondition" >
				          		    $searchOfficeCondition$  LIKE  '%$searchKeyword$%'
				            </isNotEmpty>
				         </dynamic>
	</select>
	
<select id="OfficeDAO.selectOfficeListSaeol" parameterClass="officeVO"  resultMap="office">
         SELECT  * 
				  FROM (
						SELECT ROWNUM RNUM, ALL_LIST.*  
						FROM  
						(
							          
							          SELECT 
															OFFICE_CD						officeCd, 
															SGROUP_ID						sgroupId,
															OFFICE_NM						officeNm,
															OFFICE_DP						officeDp,
															OFFICE_SORT_IX				officeSortIx,
															OFFICE_PARENT_CD		officeParentCd,
															OFFICE_IMG						officeImg,
															OFFICE_MEMO					officeMemo,
															OFFICE_TEL						officeTel,		
															OFFICE_FAX						officeFax,
															OFFICE_IS_USE				officeIsUse,
															OFFICE_IS_BOARD			officeIsBoard,
															OFFICE_REAL_CODE		officeRealCode,
															HOMEOFFICE_IS_USE  		homeOfficeIsUse,
															MODIFY_DATE 			modify_dt,
			   				  				 				REGISTER_DATE 			register_dt,
			   				  				 				OFFICE_TMP 				officeTmp
									FROM RFC_COMTCOFFICE
									<dynamic  prepend="WHERE">
										<isNotEmpty prepend="AND"  property="sgroupId" >
							          		   SGROUP_ID   = #sgroupId#
							            </isNotEmpty>
							          
							            <isNotEqual prepend="AND"   property="officeDp"  compareValue='0' >
							            	  OFFICE_DP = #officeDp#
							            </isNotEqual>
							            <isNotEmpty prepend="AND" property="searchOffice" >
							          		    OFFICE_CD  = #searchOffice#
							            </isNotEmpty>
							            
							            <!-- 새올행정 -->
							            <isNotEmpty prepend="AND" property="tmpList" >
							            (
											<iterate property="tmpList" open="OFFICE_REAL_CODE NOT IN (" close=")" conjunction=","> 
												#tmpList[]# 
											</iterate>
											
											OR OFFICE_REAL_CODE IS NULL  
                         					OR OFFICE_REAL_CODE=''
                         				)
										</isNotEmpty>
							            
							            
							            <isNotEmpty prepend="AND" property="searchOfficeCondition" >
							          		    $searchOfficeCondition$  LIKE  '%$searchKeyword$%'
							            </isNotEmpty>
							            <isNotEmpty  property="orderField" >
							            	  ORDER BY  $orderField$  $orderSort$
							            </isNotEmpty>
							            <isEmpty  property="orderField" >
							            	  ORDER BY OFFICE_CD ASC,OFFICE_DP ASC,OFFICE_SORT_IX ASC 
							            </isEmpty>
							           </dynamic>
				     ) ALL_LIST
			)
		  WHERE  RNUM  &gt; #firstIndex#
		  AND  RNUM &lt;= #firstIndex# + #recordCountPerPage#
	</select>
	
	
	
	<select id="OfficeDAO.selectOfficeListTotCntSaeol2"  parameterClass="officeVO" resultClass="int">
				
			
						SELECT COUNT(*) totcnt   
						FROM  
						(
	
	
	
	select a.DEPCODE,a.DEPCODENM,a.UPRCODE,a.MODDT,a.DEPTRANK,a.USEYN,b.OFFICE_CD,b.OFFICE_REAL_CODE from (  		
  		<iterate property="map.condition"  conjunction="union">
		   SELECT #map.condition[].depcode# DEPCODE,  
		       #map.condition[].depcodenm# DEPCODENM, 
		       #map.condition[].uprcode# UPRCODE, 
		       #map.condition[].moddt# MODDT, 
		       #map.condition[].deptrank# DEPTRANK, 
		       #map.condition[].useyn# USEYN 
  		</iterate>
  		) a LEFT OUTER JOIN RFC_COMTCOFFICE b
  		ON a.depcode=b.OFFICE_REAL_CODE
  		WHERE (b.OFFICE_CD IS NULL OR b.OFFICE_CD='')
  		
  		<isNotEmpty prepend="AND"  property="depcode" >
				(a.depcode LIKE '%' || #depcode# || '%')
		</isNotEmpty>
		
		<isNotEmpty prepend="AND"  property="uprcode" >
				(a.uprcode =  #uprcode#)
		</isNotEmpty>
		
  		
  		) ALL_LIST
			
		  
	</select>
	
	
	
	<select id="OfficeDAO.selectOfficeListSaeol2" parameterClass="officeVO" resultClass="egovMap" remapResults="true">
	
	select a.DEPCODE,a.DEPCODENM,a.UPRCODE,a.MODDT,a.DEPTRANK,a.USEYN,b.OFFICE_CD,b.OFFICE_REAL_CODE from (  		
  		<iterate property="map.condition"  conjunction="union">
		   SELECT #map.condition[].depcode# DEPCODE,  
		       #map.condition[].depcodenm# DEPCODENM, 
		       #map.condition[].uprcode# UPRCODE, 
		       #map.condition[].moddt# MODDT, 
		       #map.condition[].deptrank# DEPTRANK, 
		       #map.condition[].useyn# USEYN 
  		</iterate>
  		) a LEFT OUTER JOIN RFC_COMTCOFFICE b
  		ON a.depcode=b.OFFICE_REAL_CODE
  		WHERE (b.OFFICE_CD IS NULL OR b.OFFICE_CD='')  
  		 
  		<isNotEmpty prepend="AND"  property="depcode" >
				(a.depcode LIKE '$depcode$%')				
		</isNotEmpty>
		
		<isNotEmpty prepend="AND"  property="uprcode" >
				(a.uprcode =  #uprcode#)
		</isNotEmpty>
		  LIMIT #recordCountPerPage# OFFSET #firstIndex#
 	</select>

	<insert id="OfficeDAO.insertOffice" parameterClass="officeVO">
				INSERT INTO 
				  RFC_COMTCOFFICE  (
					OFFICE_CD, 
					SGROUP_ID,
					OFFICE_NM,
					OFFICE_DP,
					OFFICE_SORT_IX,
					OFFICE_PARENT_CD,
					OFFICE_IMG,
					OFFICE_MEMO,
					OFFICE_TEL,		
					OFFICE_FAX,
					OFFICE_IS_USE,
					OFFICE_IS_BOARD,
					OFFICE_REAL_CODE,			
					HOMEOFFICE_IS_USE,
					MODIFY_DATE,
			   		REGISTER_DATE,
			   		OFFICE_TMP
					) VALUES (
					#officeCd#, 
					#sgroupId#,
					#officeNm#,
					#officeDp#,
					#officeSortIx#,
					#officeParentCd#,
					#officeImg#,
					#officeMemo#,
					#officeTel#,		
					#officeFax#,
					#officeIsUse#,
					#officeIsBoard#,
					#officeRealCode#,
					#homeOfficeIsUse#,
					#modify_dt#,
					#register_dt#,
					#officeTmp#
				)
	</insert>
	
	
	<delete id="OfficeDAO.deleteOffice" parameterClass="officeVO" >
		DELETE  FROM RFC_COMTCOFFICE
					WHERE  OFFICE_CD=#officeCd#
	</delete>
	
	<update id="OfficeDAO.updateOffice" parameterClass="officeVO" >
		UPDATE
						 RFC_COMTCOFFICE 
		SET
						OFFICE_NM=#officeNm#, 
						OFFICE_SORT_IX	=#officeSortIx#,
						OFFICE_MEMO=#officeMemo#,
						OFFICE_TEL=#officeTel#,
						OFFICE_FAX=#officeFax#,
						OFFICE_IS_USE=#officeIsUse#,
						OFFICE_IS_BOARD=#officeIsBoard#,
						HOMEOFFICE_IS_USE=#homeOfficeIsUse#,
						MODIFY_DATE=#modify_dt#,
						OFFICE_TMP=#officeTmp#
		WHERE  
						OFFICE_CD=#officeCd#
	</update>
	
	<update id="OfficeDAO.updateOfficeSaeolSaengjeongSync" parameterClass="officeVO" >
		UPDATE
						 RFC_COMTCOFFICE 
		SET				OFFICE_CD=#officeCd#
		
						<isNotEmpty prepend="," property="officeNm">
							OFFICE_NM=#officeNm#
						</isNotEmpty>
						<isGreaterThan property="officeSortIx" compareValue="0">
							<isNotEmpty prepend="," property="officeSortIx"> 
								OFFICE_SORT_IX	=#officeSortIx#
							</isNotEmpty>
						</isGreaterThan>
						<isNotEmpty prepend="," property="officeMemo">
							OFFICE_MEMO=#officeMemo#
						</isNotEmpty>
						<isNotEmpty prepend="," property="officeTel">
							OFFICE_TEL=#officeTel#
						</isNotEmpty>
						<isNotEmpty prepend="," property="officeFax">
							OFFICE_FAX=#officeFax#
						</isNotEmpty>
						<isNotEmpty prepend="," property="officeIsUse">
							OFFICE_IS_USE=#officeIsUse#
						</isNotEmpty>
						<isNotEmpty prepend="," property="officeIsBoard">
							OFFICE_IS_BOARD=#officeIsBoard#
						</isNotEmpty>
		WHERE  
						OFFICE_CD=#officeCd#
	</update>
	<select id="OfficeDAO.selectOfficeDwrCnt"  parameterClass="java.lang.String" resultClass="int"  cacheModel="RFCOfficeCache">
						SELECT 
								COUNT(*) totcnt 					
						 FROM  RFC_COMTCOFFICE
						<dynamic prepend="WHERE">
				             <isNotEmpty>
				          		     OFFICE_PARENT_CD = #officeCd#
				            </isNotEmpty>
				        </dynamic>    
	</select>
	
	<select id="OfficeDAO.selectOfficeVOList" parameterClass="officeVO"  resultMap="office"  cacheModel="RFCOfficeCache">
			          SELECT 
											OFFICE_CD						officeCd, 
											SGROUP_ID						sgroupId,
											OFFICE_NM						officeNm,
											OFFICE_DP						officeDp,
											OFFICE_SORT_IX				officeSortIx,
											OFFICE_PARENT_CD		officeParentCd,
											OFFICE_IMG						officeImg,
											OFFICE_MEMO					officeMemo,
											OFFICE_TEL						officeTel,		
											OFFICE_FAX						officeFax,
											OFFICE_IS_USE				officeIsUse,
											OFFICE_IS_BOARD			officeIsBoard,
											OFFICE_REAL_CODE		officeRealCode,
											HOMEOFFICE_IS_USE  		homeOfficeIsUse,
											MODIFY_DATE 			modify_dt,
			   				  				REGISTER_DATE 			register_dt,
			   				  				OFFICE_TMP				officeTmp
					   FROM
										 RFC_COMTCOFFICE
			           WHERE
			           					OFFICE_DP = #officeDp#
			           AND
			            	  OFFICE_CD  LIKE  '$officeCd$%' 
			            	  ORDER BY    OFFICE_CD DESC
			            LIMIT #recordCountPerPage# OFFSET #firstIndex#
	</select>	
	
	
	<select id="OfficeDAO.selectOfficeDpList" parameterClass="officeVO"  resultMap="office"  cacheModel="RFCOfficeCache">
			          SELECT 
											OFFICE_CD						officeCd, 
											SGROUP_ID						sgroupId,
											OFFICE_NM						officeNm,
											OFFICE_DP						officeDp,
											OFFICE_SORT_IX				officeSortIx,
											OFFICE_PARENT_CD		officeParentCd,
											OFFICE_IMG						officeImg,
											OFFICE_MEMO					officeMemo,
											OFFICE_TEL						officeTel,		
											OFFICE_FAX						officeFax,
											OFFICE_IS_USE				officeIsUse,
											OFFICE_IS_BOARD			officeIsBoard,
											OFFICE_REAL_CODE		officeRealCode,
											HOMEOFFICE_IS_USE  		homeOfficeIsUse,
											MODIFY_DATE 			modify_dt,
			   				  				REGISTER_DATE 			register_dt,
			   				  				OFFICE_TMP 				officeTmp
					FROM RFC_COMTCOFFICE
					<dynamic prepend="WHERE">
			            <isNotEmpty  prepend="AND"  property="sgroupId" >
			            	   SGROUP_ID=#sgroupId#
			            </isNotEmpty>
						<!-- 추가 나의 조직도 가져오기 20140911 -->
			            <isNotEmpty prepend="AND" property="searchOffice" >							    
							    OFFICE_CD  LIKE '$searchOffice$%'
						</isNotEmpty>

			            <isNotEmpty prepend="AND"   property="officeCd">
			            	  OFFICE_PARENT_CD =  #officeCd#
			            </isNotEmpty>
			             <isNotEmpty prepend="AND"   property="officeParentCd">
			            	 OFFICE_PARENT_CD  LIKE '$officeParentCd$%'
			            </isNotEmpty>
			            <isNotEmpty prepend="AND"   property="officeDp" >
			            	  OFFICE_DP =  #officeDp#
			            </isNotEmpty>
			         </dynamic>
			         ORDER BY  OFFICE_SORT_IX   ASC
	</select>	
	
	<select id="OfficeDAO.selectOfficeDpAllList" parameterClass="officeVO"  resultMap="office"  cacheModel="RFCOfficeCache">
			          SELECT 
											OFFICE_CD						officeCd, 
											SGROUP_ID						sgroupId,
											OFFICE_NM						officeNm,
											OFFICE_DP						officeDp,
											OFFICE_SORT_IX				officeSortIx,
											OFFICE_PARENT_CD		officeParentCd,
											OFFICE_IMG						officeImg,
											OFFICE_MEMO					officeMemo,
											OFFICE_TEL						officeTel,		
											OFFICE_FAX						officeFax,
											OFFICE_IS_USE				officeIsUse,
											OFFICE_IS_BOARD			officeIsBoard,
											OFFICE_REAL_CODE		officeRealCode,
											HOMEOFFICE_IS_USE  		homeOfficeIsUse,
											MODIFY_DATE 			modify_dt,
			   				  				REGISTER_DATE 			register_dt,
			   				  				OFFICE_TMP 				officeTmp
					FROM RFC_COMTCOFFICE
					<dynamic prepend="WHERE">			            
			             <isNotEmpty prepend="AND"   property="officeCd">
			            	 OFFICE_CD  LIKE '$officeCd$%'
			            </isNotEmpty>
			            <isNotEmpty prepend="AND"   property="officeDp" >
			            	  OFFICE_DP =  #officeDp#
			            </isNotEmpty>
			         </dynamic>
			         ORDER BY  OFFICE_SORT_IX   ASC
	</select>
	
	<select id="OfficeDAO.selectOfficeAllList" parameterClass="java.lang.String"  resultMap="office">
			          SELECT 
											OFFICE_CD						officeCd, 
											SGROUP_ID						sgroupId,
											OFFICE_NM						officeNm,
											OFFICE_DP						officeDp,
											OFFICE_SORT_IX				officeSortIx,
											OFFICE_PARENT_CD		officeParentCd,
											OFFICE_IMG						officeImg,
											OFFICE_MEMO					officeMemo,
											OFFICE_TEL						officeTel,		
											OFFICE_FAX						officeFax,
											OFFICE_IS_USE				officeIsUse,
											OFFICE_IS_BOARD			officeIsBoard,
											OFFICE_REAL_CODE		officeRealCode,
											HOMEOFFICE_IS_USE  		homeOfficeIsUse,
											MODIFY_DATE 			modify_dt,
			   				  				REGISTER_DATE 			register_dt,
			   				  				OFFICE_TMP 				officeTmp
			   				  				
					FROM RFC_COMTCOFFICE
					where
			         OFFICE_CD  LIKE '$officeCd$%'
			         
			         ORDER BY  OFFICE_SORT_IX   ASC
	</select>
		

		<select id="OfficeDAO.officeDwrDpList" parameterClass="officeVO"  resultMap="office"  cacheModel="RFCOfficeCache">
			          SELECT 
											OFFICE_CD						officeCd, 
											SGROUP_ID						sgroupId,
											OFFICE_NM						officeNm,
											OFFICE_DP						officeDp,
											OFFICE_SORT_IX				officeSortIx,
											OFFICE_PARENT_CD		officeParentCd,
											OFFICE_IMG						officeImg,
											OFFICE_MEMO					officeMemo,
											OFFICE_TEL						officeTel,		
											OFFICE_FAX						officeFax,
											OFFICE_IS_USE				officeIsUse,
											OFFICE_IS_BOARD			officeIsBoard,
											OFFICE_REAL_CODE		officeRealCode,
											HOMEOFFICE_IS_USE  		homeOfficeIsUse,
											MODIFY_DATE 			modify_dt,
			   				  				REGISTER_DATE 			register_dt,
			   				  				OFFICE_TMP 				officeTmp
					FROM RFC_COMTCOFFICE
					WHERE  
					 						OFFICE_PARENT_CD  LIKE '$officeCd$%'
								            <isEqual   property="officeIsUse" compareValue="true" prepend="AND">
								            	 OFFICE_IS_USE  = '1'
								            </isEqual>
			         ORDER BY OFFICE_SORT_IX ASC
	</select>	
	
	<select id="OfficeDAO.selectOfficeSgroupList" parameterClass="officeVO"  resultMap="office"  cacheModel="RFCOfficeCache">
			          SELECT 
											OFFICE_CD						officeCd,
											SGROUP_ID						sgroupId,
											OFFICE_NM						officeNm,
											OFFICE_DP						officeDp,
											OFFICE_SORT_IX				officeSortIx,
											OFFICE_PARENT_CD		officeParentCd,
											OFFICE_IMG						officeImg,
											OFFICE_MEMO					officeMemo,
											OFFICE_TEL						officeTel,		
											OFFICE_FAX						officeFax,
											OFFICE_IS_USE				officeIsUse,
											OFFICE_IS_BOARD			officeIsBoard,
											OFFICE_REAL_CODE		officeRealCode,
											HOMEOFFICE_IS_USE  		homeOfficeIsUse,
											MODIFY_DATE 			modify_dt,
			   				  				REGISTER_DATE 			register_dt,
			   				  				OFFICE_TMP 				officeTmp
					FROM RFC_COMTCOFFICE
					
			        WHERE
			            	   SGROUP_ID=#sgroupId#
			            AND
			            	  OFFICE_DP =  #officeDp#
			             <isEqual   property="officeIsUse" compareValue="true" prepend="AND">
								            	 OFFICE_IS_USE  = '1'
						</isEqual>
					ORDER BY OFFICE_SORT_IX ASC
			       
			        
	</select>	
	
		<select id="OfficeDAO.selectOfficeListVO" parameterClass="java.lang.String"  resultClass="officeVO"  cacheModel="RFCOfficeCache">
			          SELECT 
											OFFICE_CD						officeCd,
											SGROUP_ID						sgroupId,
											OFFICE_NM						officeNm,
											OFFICE_DP						officeDp,
											OFFICE_SORT_IX				officeSortIx,
											OFFICE_PARENT_CD		officeParentCd,
											OFFICE_IMG						officeImg,
											OFFICE_MEMO					officeMemo,
											OFFICE_TEL						officeTel,		
											OFFICE_FAX						officeFax,
											OFFICE_IS_USE				officeIsUse,
											OFFICE_IS_BOARD			officeIsBoard,
											ifnull((select max(OFFICE_SORT_IX) from RFC_COMTCOFFICE where OFFICE_PARENT_CD=OFFICE_CD),0)  officeMaxSortIdx,
											(select max(OFFICE_CD) from RFC_COMTCOFFICE where OFFICE_PARENT_CD=A.OFFICE_CD) officeMaxOfficeCd,
																						
											OFFICE_REAL_CODE		officeRealCode,
											HOMEOFFICE_IS_USE  		homeOfficeIsUse,
											MODIFY_DATE 			modify_dt,
			   				  				REGISTER_DATE 			register_dt,
			   				  				OFFICE_TMP 				officeTmp

					FROM RFC_COMTCOFFICE A
					WHERE
			            	 				 OFFICE_CD = #officeCd#
	</select>	
	
	<select id="OfficeDAO.getOfficeListVO" parameterClass="officeVO"  resultMap="office">
			          SELECT 
											OFFICE_CD						officeCd,
											SGROUP_ID						sgroupId,
											OFFICE_NM						officeNm,
											nvl(OFFICE_DP,0)				officeDp,
											OFFICE_SORT_IX				officeSortIx,
											OFFICE_PARENT_CD		officeParentCd,
											OFFICE_IMG						officeImg,
											OFFICE_MEMO					officeMemo,
											OFFICE_TEL						officeTel,		
											OFFICE_FAX						officeFax,
											OFFICE_IS_USE				officeIsUse,
											OFFICE_IS_BOARD			officeIsBoard,
											OFFICE_REAL_CODE	officeRealCode,
											HOMEOFFICE_IS_USE  		homeOfficeIsUse,
											MODIFY_DATE 			modify_dt,
			   				  				REGISTER_DATE 			register_dt,
			   				  				OFFICE_TMP 				officeTmp
			   				  				
					FROM RFC_COMTCOFFICE
					WHERE
			            	 				 OFFICE_REAL_CODE = #officeRealCode#
	</select>
	<select id="OfficeDAO.selectOfficeSgroupListAsc"  resultMap="office"  cacheModel="RFCOfficeCache">
			          SELECT 
											OFFICE_CD						officeCd,
											SGROUP_ID						sgroupId,
											OFFICE_NM						officeNm,
											OFFICE_DP						officeDp,
											OFFICE_SORT_IX				officeSortIx,
											OFFICE_PARENT_CD		officeParentCd,
											OFFICE_IMG						officeImg,
											OFFICE_MEMO					officeMemo,
											OFFICE_TEL						officeTel,		
											OFFICE_FAX						officeFax,
											OFFICE_IS_USE				officeIsUse,
											OFFICE_IS_BOARD			officeIsBoard,
											OFFICE_REAL_CODE		officeRealCode,
											HOMEOFFICE_IS_USE  		homeOfficeIsUse,
											MODIFY_DATE 			modify_dt,
			   				  				REGISTER_DATE 			register_dt,
			   				  				OFFICE_TMP 				officeTmp
					FROM 
										RFC_COMTCOFFICE
			        WHERE
			        		  			OFFICE_IS_USE='1'   
			        AND   
			        		  			SGROUP_ID=#sgroupId#
			         order by  OFFICE_CD  ASC
	</select>	
	
	<select id="OfficeDAO.selectOfficeParentOfficeCdList"  resultClass="java.lang.String"  cacheModel="RFCOfficeCache">
			        select
						OFFICE_CD  officeCd
					from
						RFC_COMTCOFFICE
					where
						OFFICE_PARENT_CD =#officeCd#
	</select>	
	<select id="OfficeDAO.selectOfficeMessengerList"   resultMap="office"  cacheModel="RFCOfficeCache">
			     SELECT 
						OFFICE_CD						officeCd, 
						SGROUP_ID						sgroupId,
						OFFICE_NM						officeNm,
						OFFICE_DP						officeDp,
						OFFICE_SORT_IX				officeSortIx,
						OFFICE_PARENT_CD		officeParentCd,
						OFFICE_IMG						officeImg,
						OFFICE_MEMO					officeMemo,
						OFFICE_TEL						officeTel,		
						OFFICE_FAX						officeFax,
						OFFICE_IS_USE				officeIsUse,
						OFFICE_IS_BOARD			officeIsBoard,
						OFFICE_REAL_CODE		officeRealCode,
						HOMEOFFICE_IS_USE  		homeOfficeIsUse,
						MODIFY_DATE 			modify_dt,
			   			REGISTER_DATE 			register_dt,
			   			OFFICE_TMP 				officeTmp
					FROM
						 RFC_COMTCOFFICE
                    WHERE 
                         OFFICE_IS_USE='1'
                         <isNotEmpty  prepend="AND"  property="sgroupId" >
			            	    SGROUP_ID=#sgroupId#
			            </isNotEmpty>
			            <isNotEmpty prepend="AND"   property="officeCd">
			            	   OFFICE_CD  LIKE  concat (#officeCd# , '%')
			            </isNotEmpty>
                   ORDER BY OFFICE_CD, OFFICE_SORT_IX   ASC
	</select>	
	
	<select id="OfficeDAO.selectOfficeJsonList" parameterClass="officeVO"  resultMap="office"  cacheModel="RFCOfficeCache">
			          SELECT 
											OFFICE_CD						officeCd, 
											SGROUP_ID						sgroupId,
											OFFICE_NM						officeNm,
											OFFICE_DP						officeDp,
											OFFICE_SORT_IX				officeSortIx,
											OFFICE_PARENT_CD		officeParentCd,
											OFFICE_IMG						officeImg,
											OFFICE_MEMO					officeMemo,
											OFFICE_TEL						officeTel,		
											OFFICE_FAX						officeFax,
											OFFICE_IS_USE				officeIsUse,
											OFFICE_IS_BOARD			officeIsBoard,
											OFFICE_REAL_CODE		officeRealCode,
											HOMEOFFICE_IS_USE  		homeOfficeIsUse,
											MODIFY_DATE 			modify_dt,
			   				  				REGISTER_DATE 			register_dt,
			   				  				OFFICE_TMP 				officeTmp
					FROM RFC_COMTCOFFICE
					<dynamic prepend="WHERE">
			            <isNotEmpty  prepend="AND"  property="sgroupId" >
			            	   SGROUP_ID=#sgroupId#
			            </isNotEmpty>
			            <isNotEmpty prepend="AND"   property="officeCd">
			            	  OFFICE_PARENT_CD =  #officeCd#
			            </isNotEmpty>
			             <isNotEmpty prepend="AND"   property="officeParentCd">
			            	 OFFICE_PARENT_CD  LIKE '$officeParentCd$%'
			            </isNotEmpty>
			            <isNotEmpty prepend="AND"   property="officeDp">
			            	  OFFICE_DP =  #officeDp#
			            </isNotEmpty>
			         </dynamic>
			         ORDER BY  OFFICE_SORT_IX   ASC
	</select>	
	
	<select id="OfficeDAO.selectOfficeSingleList" parameterClass="officeVO"  resultMap="office"  cacheModel="RFCOfficeCache">
			          SELECT 
											OFFICE_CD						officeCd, 
											SGROUP_ID						sgroupId,
											OFFICE_NM						officeNm,
											OFFICE_DP						officeDp,
											OFFICE_SORT_IX				officeSortIx,
											OFFICE_PARENT_CD		officeParentCd,
											OFFICE_IMG						officeImg,
											OFFICE_MEMO					officeMemo,
											OFFICE_TEL						officeTel,		
											OFFICE_FAX						officeFax,
											OFFICE_IS_USE				officeIsUse,
											OFFICE_IS_BOARD			officeIsBoard,
											OFFICE_REAL_CODE		officeRealCode,
											HOMEOFFICE_IS_USE  		homeOfficeIsUse,
											MODIFY_DATE 			modify_dt,
			   				  				REGISTER_DATE 			register_dt,
			   				  				OFFICE_TMP 				officeTmp
					FROM RFC_COMTCOFFICE
					<dynamic prepend="WHERE">
			            <isNotEmpty prepend="AND"   property="officeCd">
			            	  OFFICE_CD = #officeCd#
			            </isNotEmpty>
			           
			         </dynamic>
			         ORDER BY  OFFICE_SORT_IX   ASC
	</select>
	
	
	
	<select id="OfficeDAO.selectOfficeListAll" parameterClass="officeVO"  resultMap="office"  cacheModel="RFCOfficeCache">
			          SELECT 
											OFFICE_CD						officeCd, 
											SGROUP_ID						sgroupId,
											OFFICE_NM						officeNm,
											OFFICE_DP						officeDp,
											OFFICE_SORT_IX				officeSortIx,
											OFFICE_PARENT_CD		officeParentCd,
											OFFICE_IMG						officeImg,
											OFFICE_MEMO					officeMemo,
											OFFICE_TEL						officeTel,		
											OFFICE_FAX						officeFax,
											OFFICE_IS_USE				officeIsUse,
											OFFICE_IS_BOARD			officeIsBoard,
											OFFICE_REAL_CODE		officeRealCode,
											HOMEOFFICE_IS_USE  		homeOfficeIsUse,
											MODIFY_DATE 			modify_dt,
			   				  				REGISTER_DATE 			register_dt,
			   				  				OFFICE_TMP 				officeTmp

					FROM RFC_COMTCOFFICE
					<dynamic  prepend="WHERE">
						<isNotEmpty prepend="AND"  property="sgroupId" >
			          		   SGROUP_ID   = #sgroupId#
			            </isNotEmpty>
			          
			            <isNotEqual prepend="AND"   property="officeDp"  compareValue='0' >
			            	  OFFICE_DP = #officeDp#
			            </isNotEqual>
			            <isNotEmpty prepend="AND" property="searchOffice" >
			          		    OFFICE_CD  = #searchOffice#
			            </isNotEmpty>
			            <isNotEmpty prepend="AND" property="searchOfficeCondition" >
			          		    $searchOfficeCondition$  LIKE  '%$searchKeyword$%'
			            </isNotEmpty>
			         </dynamic>
			         	<isNotEmpty  property="orderField">
			            	  ORDER BY  $orderField$   $orderSort$
			            </isNotEmpty>
			            <isEmpty  property="orderField" >
			            	  ORDER BY  OFFICE_SORT_IX   ASC
			            </isEmpty>
	</select>
	<select id="OfficeDAO.selectDpOfficeList" parameterClass="officeVO"  resultMap="office"  cacheModel="RFCOfficeCache">
			          SELECT 
											OFFICE_CD						officeCd, 
											SGROUP_ID						sgroupId,
											OFFICE_NM						officeNm,
											OFFICE_DP						officeDp,
											OFFICE_SORT_IX				officeSortIx,
											OFFICE_PARENT_CD		officeParentCd,
											OFFICE_IMG						officeImg,
											OFFICE_MEMO					officeMemo,
											OFFICE_TEL						officeTel,		
											OFFICE_FAX						officeFax,
											OFFICE_IS_USE				officeIsUse,
											OFFICE_IS_BOARD			officeIsBoard,
											OFFICE_REAL_CODE		officeRealCode,
											HOMEOFFICE_IS_USE  		homeOfficeIsUse,
											MODIFY_DATE 			modify_dt,
			   				  				REGISTER_DATE 			register_dt,
			   				  				OFFICE_TMP 				officeTmp
					FROM RFC_COMTCOFFICE
					<dynamic prepend="WHERE">
			            <isNotEmpty  prepend="AND"  property="sgroupId" >
			            	   SGROUP_ID=#sgroupId#
			            </isNotEmpty>
			            <isNotEmpty prepend="AND"   property="officeCd">
			            	  OFFICE_PARENT_CD =  #officeCd#
			            </isNotEmpty>
			             <isNotEmpty prepend="AND"   property="officeParentCd">
			            	 OFFICE_PARENT_CD  LIKE '$officeParentCd$%'
			            </isNotEmpty>
			            <isNotEmpty prepend="AND"   property="officeDp" >
			            	  OFFICE_DP =  #officeDp#
			            </isNotEmpty>
			            
			            <isNotEmpty prepend="AND"   property="officeIsUse" >
			            	  OFFICE_IS_USE =  #officeIsUse#
			            </isNotEmpty>
			           
			         </dynamic>
			         ORDER BY  OFFICE_SORT_IX   ASC
	</select>
	<select id="OfficeDAO.selectOfficeSgroupListJson" parameterClass="officeVO"  resultMap="office"  cacheModel="RFCOfficeCache">
			          SELECT 
											OFFICE_CD						officeCd,
											SGROUP_ID						sgroupId,
											OFFICE_NM						officeNm,
											OFFICE_DP						officeDp,
											OFFICE_SORT_IX				officeSortIx,
											OFFICE_PARENT_CD		officeParentCd,
											OFFICE_IMG						officeImg,
											OFFICE_MEMO					officeMemo,
											OFFICE_TEL						officeTel,		
											OFFICE_FAX						officeFax,
											OFFICE_IS_USE				officeIsUse,
											OFFICE_IS_BOARD			officeIsBoard,
											OFFICE_REAL_CODE		officeRealCode,
											HOMEOFFICE_IS_USE  		homeOfficeIsUse,
											MODIFY_DATE 			modify_dt,
			   				  				REGISTER_DATE 			register_dt,
			   				  				OFFICE_TMP 				officeTmp
					FROM RFC_COMTCOFFICE
					
			        WHERE
			            	   SGROUP_ID=#sgroupId#
			            AND
			            	  OFFICE_DP =  #officeDp#
			             <isEqual   property="officeIsUse" compareValue="true" prepend="AND">
								            	 OFFICE_IS_USE  = '1'
						</isEqual>
						<isNotEmpty prepend="AND"   property="officeCd" >
			            	  OFFICE_CD =  #officeCd#
			            </isNotEmpty>
					ORDER BY OFFICE_SORT_IX ASC
			       
			        
	</select>	
	
	
	
<select id="OfficeDAO.getOfficeTopList" parameterClass="officeVO"  resultClass="officeVO">
	
		          
	   SELECT OFFICE_CD officeCd, 
              OFFICE_NM officeNm, 
              OFFICE_DP officeDp,
              OFFICE_SORT_IX officeSortIx,
              OFFICE_PARENT_CD officeParentCd,
              OFFICE_TMP 				officeTmp  
        FROM RFC_COMTCOFFICE 
        WHERE 1=1 
              AND OFFICE_DP=#officeDp#
              <isGreaterThan property="officeDp" compareValue="1">  
              		AND OFFICE_PARENT_CD=#officeCd#
              </isGreaterThan>  
     ORDER BY OFFICE_CD desc 
     limit 0,1 
	</select>

<select id="OfficeDAO.selectOfficeEminwonList" parameterClass="java.lang.String"  resultMap="office">
			         SELECT 
											OFFICE_CD						officeCd, 
											SGROUP_ID						sgroupId,
											OFFICE_NM						officeNm,
											OFFICE_DP						officeDp,
											OFFICE_SORT_IX				officeSortIx,
											OFFICE_PARENT_CD		officeParentCd,
											OFFICE_IMG						officeImg,
											OFFICE_MEMO					officeMemo,
											OFFICE_TEL						officeTel,		
											OFFICE_FAX						officeFax,
											OFFICE_IS_USE				officeIsUse,
											OFFICE_IS_BOARD			officeIsBoard,
											OFFICE_REAL_CODE		officeRealCode,
											HOMEOFFICE_IS_USE  		homeOfficeIsUse,
											MODIFY_DATE 			modify_dt,
			   				  				REGISTER_DATE 			register_dt,
			   				  				OFFICE_TMP 				officeTmp
					FROM RFC_COMTCOFFICE
					where
			         	OFFICE_CD  LIKE '$officeCd$%'
			         AND
        				OFFICE_REAL_CODE IS NOT NULL     
			         
			         ORDER BY  OFFICE_SORT_IX   ASC
	</select>
	
	
	<update id="OfficeDAO.updateOfficeReplace" parameterClass="officeVO" >
		UPDATE
						 RFC_COMTCOFFICE 
		SET
						OFFICE_NM=#officeNm#, 
						OFFICE_REAL_CODE=#officeRealCode# 
		WHERE  
						OFFICE_CD=#officeCd#
	</update>
	
	<update id="OfficeDAO.updateOfficeIsUse" parameterClass="officeVO" >
		UPDATE
						 RFC_COMTCOFFICE 
		SET
						OFFICE_IS_USE='0' 
		WHERE  
						OFFICE_CD=#officeCd#
	</update>

<select id="OfficeDAO.selectOfficeRealCode" parameterClass="java.lang.String"  resultClass="String">
			        SELECT 
						OFFICE_REAL_CODE		officeRealCode
					FROM RFC_COMTCOFFICE
					WHERE
			         	OFFICE_CD  = #officeCd#
	</select>
	
	
	<select id="OfficeDAO.selectOfficeEminwonFileList" parameterClass="officeVO"  resultClass="eminwonOfficeVO">
	
		SELECT 
			EMINWONOP_SID	eminwonOpSid
  			,EMINWONOP_DEPTID	eminwonOpDeptId
  			,EMINWONOP_DEPTNAME	eminwonOpDeptName
 			,EMINWONOP_PARID		eminwonOpParId
  			,EMINWONOP_SEQ		eminwonOpSeq
  		FROM	RFC_COMTNEMINWON
  			
	</select>
	
	<delete id="OfficeDAO.deleteEminwonFileList" parameterClass="EminwonOfficeVO" >
		DELETE  FROM RFC_COMTNEMINWON
	</delete>
	
	<insert id="OfficeDAO.insertEminwonFileList" parameterClass="EminwonOfficeVO">
				INSERT INTO 
				  RFC_COMTNEMINWON(
					 EMINWONOP_SID
  					,EMINWONOP_DEPTID
  					,EMINWONOP_DEPTNAME
 					,EMINWONOP_PARID
  					,EMINWONOP_SEQ
					)VALUES (
					 #eminwonOpSid#
  					,#eminwonOpDeptId#
  					,#eminwonOpDeptName#
 					,#eminwonOpParId#
  					,#eminwonOpSeq#
				)
	</insert>
	
	<select id="OfficeDAO.selectOnnaraOfficeList" parameterClass="java.lang.String"   resultMap="office">
	SELECT 
		OFFICE_CD						officeCd, 
		SGROUP_ID						sgroupId,
		OFFICE_NM						officeNm,
		OFFICE_DP						officeDp,
		OFFICE_SORT_IX				officeSortIx,
		OFFICE_PARENT_CD		officeParentCd,
		OFFICE_IMG						officeImg,
		OFFICE_MEMO					officeMemo,
		OFFICE_TEL						officeTel,		
		OFFICE_FAX						officeFax,
		OFFICE_IS_USE				officeIsUse,
		OFFICE_IS_BOARD			officeIsBoard,
		OFFICE_REAL_CODE		officeRealCode,
		HOMEOFFICE_IS_USE  		homeOfficeIsUse,
		MODIFY_DATE 			modify_dt,
 		REGISTER_DATE 			register_dt,
 		OFFICE_TMP 				officeTmp		
	FROM RFC_COMTCOFFICE
	WHERE 
		OFFICE_REAL_CODE = #officeRealCode#
	</select>
	
	
</sqlMap>