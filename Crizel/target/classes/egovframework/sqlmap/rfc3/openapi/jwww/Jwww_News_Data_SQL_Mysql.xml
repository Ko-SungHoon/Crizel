<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="JWWWNewsDataManage">
	<typeAlias  alias="JnewsVO"  type = "egovframework.rfc3.openapi20.vo.JnewsVO"/>
	  <typeAlias  alias="jeventSearchVO"	 				type = "egovframework.rfc3.openapi20.vo.JeventSearchVO"/> 
    <typeAlias  alias="jeventFileVO"						type = "egovframework.rfc3.openapi20.vo.JeventFileVO"/>

  <select id="JwwwDAO.selectNewsDataListCnt"  parameterClass="jeventSearchVO" resultClass="int" >
		    		  select
						  count(*) totcnt
						FROM
						( select 
							a.INDEXNUM,
							a.CATEIDX,
							a.GROUPNUM,	
							a.ARRANGENUM,	
							a.DEPTH,	
							a.SUBJECT,	
							a.CONTENT,	
							a.WFLAG,	
							a.KNAME,	
							a.USERID,	
							a.SSN,	
							a.PASSWD,	
							a.ORGCD,	
							a.ORGNM,	
							a.EMAIL,	
							a.MOBILE,	
							a.CLIENTIP,	
							a.HIT,	
							a.ISRATE,	
							a.ISSMS,	
							a.ATTIDX,	
							a.REGDATE
						  from JBOARD_CITY_NEWS a
						  ) b
						  where 1=1 
						  
						 <isNotEmpty prepend="AND" property="keyword" >
								a.CONTENT like '%$keyword$%' or 
							    a.KNAME  like '%$keyword$%' or
							    a.USERID  like '%$keyword$%' or
							    a.ORGNM like '%$keyword$%' 
						 </isNotEmpty>  
    </select>
    <select id="JwwwDAO.selectNewsDataList"  parameterClass="jeventSearchVO" resultClass="JnewsVO" >
		    		select
							indexNum,
							cateIdx,
							groupNum,	
							arrangeNum,	
							depth,	
							subject,	
							content,	
							wflag,	
							kname,	
							userid,	
							ssn,	
							passwd,	
							orgCd,	
							orgNm,	
							email,	
							mobile,	
							clientip,	
							hit,	
							israte,	
							issMs,	
							attidx,	
							regDate
						FROM
						( select 
						    a.INDEXNUM,
							a.CATEIDX,
							a.GROUPNUM,	
							a.ARRANGENUM,	
							a.DEPTH,	
							a.SUBJECT,	
							a.CONTENT,	
							a.WFLAG,	
							a.KNAME,	
							a.USERID,	
							a.SSN,	
							a.PASSWD,	
							a.ORGCD,	
							a.ORGNM,	
							a.EMAIL,	
							a.MOBILE,	
							a.CLIENTIP,	
							a.HIT,	
							a.ISRATE,	
							a.ISSMS,	
							a.ATTIDX,	
							a.REGDATE
						  from JBOARD_CITY_NEWS a
						  ) b
						  where 1=1 
						  
						 <isNotEmpty prepend="AND" property="keyword" >
								a.CONTENT like '%$keyword$%' or 
							    a.KNAME  like '%$keyword$%' or
							    a.USERID  like '%$keyword$%' or
							    a.ORGNM like '%$keyword$%' 
						 </isNotEmpty>  
						 
						 <isEmpty  property="orderBy" >
						 	 order by indexNum desc
						 </isEmpty>  
						 <isNotEmpty  property="orderBy" >
							  order by  $orderBy$
						 </isNotEmpty>
						 
						  LIMIT #pageSize# OFFSET #pageIndex#
    </select>
    
        <select id="JwwwDAO.getNewsDataInfo"  parameterClass="jeventSearchVO" resultClass="JnewsVO" >
		 			select 
						    indexNum,
							cateIdx,
							groupNum,	
							arrangeNum,	
							depth,	
							subject,	
							content,	
							wflag,	
							kname,	
							userid,	
							ssn,	
							passwd,	
							orgCd,	
							orgNm,	
							email,	
							mobile,	
							clientip,	
							hit,	
							israte,	
							issMs,	
							attidx,	
							regDate
						  from JBOARD_CITY_NEWS
						  where 1=1  and indexNum=#indexNum#
    </select>
    
    <select id="JwwwDAO.getNewsFileInfo"  parameterClass="JeventFileVO" resultClass="JeventFileVO" >
		 			select 
						indexNum,
						attNum,
						boardNm,
						fileName,
						fileSize,
						fileExt,
						downLoad,
						regDate
					from JJ_ATT_INFO
					where 1=1  and indexNum=#attidx#
    </select>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <select id="JwwwDAO.selectOpenBoardDataListCnt"  parameterClass="jeventSearchVO" resultClass="int" >
		    		  select
						  count(*) totcnt
						FROM
						( select 
							a.INDEXNUM,
							a.CATEIDX,
							a.GROUPNUM,	
							a.ARRANGENUM,	
							a.DEPTH,	
							a.SUBJECT,	
							a.CONTENT,	
							a.WFLAG,	
							a.KNAME,	
							a.USERID,	
							a.SSN,	
							a.PASSWD,	
							a.ORGCD,	
							a.ORGNM,	
							a.EMAIL,	
							a.MOBILE,	
							a.CLIENTIP,	
							a.HIT,	
							a.ISRATE,	
							a.ISSMS,	
							a.ATTIDX,	
							a.REGDATE
						  from $boardtable$ a
						  ) b
						  where 1=1 
						  
						 <isNotEmpty prepend="AND" property="keyword" >
								a.CONTENT like '%$keyword$%' or 
							    a.KNAME  like '%$keyword$%' or
							    a.USERID  like '%$keyword$%' or
							    a.ORGNM like '%$keyword$%' 
						 </isNotEmpty>  
    </select>
    <select id="JwwwDAO.selectOpenBoardDataList"  parameterClass="jeventSearchVO" resultClass="JnewsVO" >
		    		select
							indexNum,
							cateIdx,
							groupNum,	
							arrangeNum,	
							depth,	
							subject,	
							content,	
							wflag,	
							kname,	
							userid,	
							ssn,	
							passwd,	
							orgCd,	
							orgNm,	
							email,	
							mobile,	
							clientip,	
							hit,	
							israte,	
							issMs,	
							attidx,	
							regDate
						FROM
						( select 
						    a.INDEXNUM,
							a.CATEIDX,
							a.GROUPNUM,	
							a.ARRANGENUM,	
							a.DEPTH,	
							a.SUBJECT,	
							a.CONTENT,	
							a.WFLAG,	
							a.KNAME,	
							a.USERID,	
							a.SSN,	
							a.PASSWD,	
							a.ORGCD,	
							a.ORGNM,	
							a.EMAIL,	
							a.MOBILE,	
							a.CLIENTIP,	
							a.HIT,	
							a.ISRATE,	
							a.ISSMS,	
							a.ATTIDX,	
							a.REGDATE
						  from $boardtable$ a
						  ) b
						  where 1=1 
						  
						 <isNotEmpty prepend="AND" property="keyword" >
								a.CONTENT like '%$keyword$%' or 
							    a.KNAME  like '%$keyword$%' or
							    a.USERID  like '%$keyword$%' or
							    a.ORGNM like '%$keyword$%' 
						 </isNotEmpty>  
						 
						 <isEmpty  property="orderBy" >
						 	 order by indexNum desc
						 </isEmpty>  
						 <isNotEmpty  property="orderBy" >
							  order by  $orderBy$
						 </isNotEmpty>
						 
						  LIMIT #pageSize# OFFSET #pageIndex#
    </select>
    
        <select id="JwwwDAO.getOpenBoardDataInfo"  parameterClass="jeventSearchVO" resultClass="JnewsVO" >
		 			select 
						    indexNum,
							cateIdx,
							groupNum,	
							arrangeNum,	
							depth,	
							subject,	
							content,	
							wflag,	
							kname,	
							userid,	
							ssn,	
							passwd,	
							orgCd,	
							orgNm,	
							email,	
							mobile,	
							clientip,	
							hit,	
							israte,	
							issMs,	
							attidx,	
							regDate
						  from $boardtable$
						  where 1=1  and indexNum=#indexNum#
    </select>
    
    <select id="JwwwDAO.getOpenBoardFileInfo"  parameterClass="JeventFileVO" resultClass="JeventFileVO" >
		 			select 
						indexNum,
						attNum,
						boardNm,
						fileName,
						fileSize,
						fileExt,
						downLoad,
						regDate
					from JJ_ATT_INFO
					where 1=1  and indexNum=#attidx#
    </select>
    
</sqlMap>