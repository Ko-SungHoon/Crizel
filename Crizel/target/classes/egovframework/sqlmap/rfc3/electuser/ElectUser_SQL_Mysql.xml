<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="ElectUserManage">
	<cacheModel type="${Globals.ibatis.default.cache}" id="ElectUserManageCache" readOnly="true" serialize="false">
		<flushInterval hours="24" />
	</cacheModel>
	<typeAlias  alias="electUserVO" type = "egovframework.rfc3.electuser.vo.ElectUserVO"/>
	<select id="ElectUserDAO.selectElectUserListTotal" parameterClass="electUserVO" resultClass="int" cacheModel="ElectUserManageCache">
		SELECT
			COUNT(*) totcnt
		FROM
			RFC_COMTNELECTUSER
		WHERE
			1=1
			<isNotEmpty prepend="AND" property="searchCondition" >
          		$searchCondition$  LIKE '%$searchKeyword$%'
            </isNotEmpty>	
	</select>
	<select id="ElectUserDAO.selectElectUserList" parameterClass="electUserVO" resultClass="electUserVO" cacheModel="ElectUserManageCache">
		SELECT
			USER_SID userSid,
			USER_BIRTH_DAY userBirthDay,
			USER_REGNUM userRegNum,
			USER_NAME userName,
			SEX sex,
			POLLING_AREA pollingArea,
			ELECT_ADDRESS electAddress,
			USER_ADDRESS userAddress,
			USER_ETC1 userEtc1,
			USER_ETC2 userEtc2,
			USER_ETC3 userEtc3,
			USER_ETC4 userEtc4,
			USER_ETC5 userEtc5
		FROM
			RFC_COMTNELECTUSER
		WHERE
			1=1
			<isNotEmpty prepend="AND" property="searchCondition" >
          		$searchCondition$  LIKE '%$searchKeyword$%'
            </isNotEmpty>		
		LIMIT #recordCountPerPage# OFFSET #firstIndex#
	</select>
	<select id="ElectUserDAO.getElectUserList" parameterClass="electUserVO" resultClass="electUserVO" cacheModel="ElectUserManageCache">
		SELECT
			USER_SID userSid,
			USER_BIRTH_DAY userBirthDay,
			USER_REGNUM userRegNum,
			USER_NAME userName,
			SEX sex,
			POLLING_AREA pollingArea,
			ELECT_ADDRESS electAddress,
			USER_ADDRESS userAddress,
			USER_ETC1 userEtc1,
			USER_ETC2 userEtc2,
			USER_ETC3 userEtc3,
			USER_ETC4 userEtc4,
			USER_ETC5 userEtc5
		FROM
			RFC_COMTNELECTUSER
		WHERE
			USER_BIRTH_DAY = #userBirthDay# AND USER_REGNUM = #userRegNum# AND USER_NAME = #userName#
	</select>
	<update id="ElectUserDAO.updateElectUser" parameterClass="electUserVO">
		UPDATE
			RFC_COMTNELECTUSER
		SET
			USER_BIRTH_DAY = #userBirthDay#,
			USER_REGNUM = #userRegNum#,
			USER_NAME = #userName#,
			SEX = #sex#,
			POLLING_AREA = #pollingArea#,
			ELECT_ADDRESS = #electAddress#,
			USER_ADDRESS = #userAddress#,
			USER_ETC1 = #userEtc1#,
			USER_ETC2 = #userEtc2#,
			USER_ETC3 = #userEtc3#,
			USER_ETC4 = #userEtc4#,
			USER_ETC5 = #userEtc5#
		WHERE
			USER_SID = #userSid#
	</update>
	<insert id="ElectUserDAO.insertElectUser" parameterClass="electUserVO">
		INSERT INTO RFC_COMTNELECTUSER
		(
			USER_SID,
			USER_BIRTH_DAY,
			USER_REGNUM,
			USER_NAME,
			SEX,
			POLLING_AREA,
			ELECT_ADDRESS,
			USER_ADDRESS,
			USER_ETC1,
			USER_ETC2,
			USER_ETC3,
			USER_ETC4,
			USER_ETC5
		)VALUES
		(
			#userSid#,
			#userBirthDay#,
			#userRegNum#,
			#userName#,
			#sex#,
			#pollingArea#,
			#electAddress#,
			#userAddress#,
			#userEtc1#,
			#userEtc2#,
			#userEtc3#,
			#userEtc4#,
			#userEtc5#
		)
	</insert>
	<delete id="ElectUserDAO.deleteElectUser" parameterClass="electUserVO">
		DELETE
		FROM
			RFC_COMTNELECTUSER
	</delete>
</sqlMap>