<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="MallSetupManage">
	<cacheModel type="${Globals.ibatis.default.cache}" id="MallSetupManageCache" readOnly="true" serialize="false">
		<flushInterval hours="24" />
		<flushOnExecute statement="setupDAO.insertMallSetup"/>
		<flushOnExecute statement="setupDAO.updateMallSetup"/>
		<flushOnExecute statement="setupDAO.deleteMallSetup"/>		
	</cacheModel>
	<typeAlias  alias="mallSetupVO" type = "egovframework.rfc3.mall.vo.MallSetupVO"/>
	<select id="setupDAO.selectMallSetupList"  parameterClass="mallSetupVO" resultClass="mallSetupVO" cacheModel="MallSetupManageCache">
		SELECT * 
		  FROM 
		       (SELECT ROWNUM RNUM, 
		              ALL_LIST.* 
		         FROM 
		              (SELECT 
		              		SETUP_KEY setupKey,
		              		SETUP_TEXT setupText,
		              		SETUP_VALUE setupValue,
		              		SETUP_VALUE1 setupValue1,
		              		SETUP_VALUE2 setupValue2,
		              		SETUP_FILE_PATH setupFilePath
		                FROM RFC_COMTNMALLSETUP
		                WHERE
							1=1
							<isNotEmpty prepend="AND" property="searchCondition" >
								$searchCondition$  LIKE '%$searchKeyword$%'
							</isNotEmpty>
		              ) ALL_LIST 
		       ) 
		 WHERE RNUM &gt; #firstIndex# AND RNUM &lt;= #firstIndex# + #recordCountPerPage# 
	</select>
	<select id="setupDAO.selectMallSetup"  parameterClass="mallSetupVO" resultClass="mallSetupVO" cacheModel="MallSetupManageCache">
		SELECT 
			SETUP_KEY setupKey,
			SETUP_TEXT setupText,
			SETUP_VALUE setupValue,
			SETUP_VALUE1 setupValue1,
       		SETUP_VALUE2 setupValue2,
       		SETUP_FILE_PATH setupFilePath
		FROM RFC_COMTNMALLSETUP
		WHERE
			SETUP_KEY = #setupKey#
	</select>
	<select id="setupDAO.selectMallSetupTotal"  parameterClass="mallSetupVO" resultClass="int" cacheModel="MallSetupManageCache">
		SELECT 
			COUNT(*) totcnt		
		FROM RFC_COMTNMALLSETUP
		WHERE
			1=1
			<isNotEmpty prepend="AND" property="searchCondition" >
				$searchCondition$  LIKE '%$searchKeyword$%'
			</isNotEmpty>
	</select>
	<insert id="setupDAO.insertMallSetup"  parameterClass="mallSetupVO" >
		INSERT INTO RFC_COMTNMALLSETUP
		(
			SETUP_KEY,
			SETUP_TEXT,
			SETUP_VALUE,
			SETUP_VALUE1,
			SETUP_VALUE2,
			SETUP_FILE_PATH,
		)
		VALUES
		(
			#setupKey#,
			#setupText#,
			#setupValue#,
			#setupValue1#,
			#setupValue2#,
			#setupFilePath#
		)
	</insert>
	<update id="setupDAO.updateMallSetup"  parameterClass="mallSetupVO" >
		UPDATE RFC_COMTNMALLSETUP 
		SET
			SETUP_TEXT = #setupText#,
			SETUP_VALUE = #setupValue#,
			SETUP_VALUE1 = #setupValue1#,
			SETUP_VALUE2 = #setupValue2#,
			SETUP_FILE_PATH=#setupFilePath#
			
		WHERE
			SETUP_KEY = #setupKey#
	</update>
	
	<delete id="setupDAO.deleteMallSetup"  parameterClass="mallSetupVO" >
		DELETE FROM RFC_COMTNMALLSETUP 
		WHERE
			SETUP_KEY = #setupKey#
	</delete>
	
</sqlMap>