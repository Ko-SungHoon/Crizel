<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="RFCBoardEtcManage">
	 
	 <cacheModel type="${Globals.ibatis.default.cache}" id="RFCBoardEtcManageCache" readOnly="true" serialize="false">
      <flushInterval hours="24" />
      	<flushOnExecute statement="boardDAO.insertBoardEtc"/>
		<flushOnExecute statement="boardDAO.updateBoardEtc"/>
		<flushOnExecute statement="boardDAO.insertAllBoardEtc"/>
     </cacheModel>
	 
	 <typeAlias  alias="egovMap"      type = "egovframework.rte.psl.dataaccess.util.EgovMap"/>    
     <typeAlias  alias="boardEtcVO" type = "egovframework.rfc3.board.vo.BoardEtcVO"/>
    
	<select id="boardDAO.selectBoardIdEtcCount" parameterClass="boardVO" resultClass="int" cacheModel="RFCBoardEtcManageCache">
			       	SELECT
			       			count(*) totcnt
						FROM
						    RFC_COMTNBBSETC A
						WHERE  1=1
						AND A.BOARD_ID = #boardId#						
	</select>
	<select  id="boardDAO.getBoardEtc"  parameterClass="boardEtcVO"  resultClass="boardEtcVO" cacheModel="RFCBoardEtcManageCache">
					SELECT
						A.BOARD_ID boardId,
						A.THUMBNAIL_FL thumbnailFl,
						A.THUMBNAIL_WIDTH thumbnailWidth,
						A.THUMBNAIL_HEIGHT thumbnailHeight,
						A.THUMBNAIL_SCALE thumbnailScale,
						A.BOARD_SEARCH_FL boardSearchFl,
						A.BOARD_RSS_FL boardRssFl,
						A.PROTECT_REPLY_CNT protectReplyCnt,
						A.BOARD_ADMIN_FILTER_FL boardAdminFilterFl,
						A.BOARD_CLEANER_FL boardCleanerFl,
						A.JUMIN_FILTER_FL juminFilterFl,
						A.FOREIGN_FILTER_FL foreignFilterFl,
						A.CORPNUM_FILTER_FL corpnumFilterFl,
						A.BIZNUM_FILTER_FL biznumFilterFl,
						A.PHONE_FILTER_FL phoneFilterFl,
						A.MOBILE_FILTER_FL mobileFilterFl,
						A.EMAIL_FILTER_FL emailFilterFl,
						A.HOMEPAGE_FILTER_FL homepageFilterFl,
						A.EXTENSION_FILTER_FL extensionFilterFl,
						A.FILTER_TEXT filterText,
						B.BOARD_SUMMARY boardSummary,
						B.BOARD_TITLE boardTitle			
					FROM
						RFC_COMTNBBSETC A inner join RFC_COMTNBBS B ON A.BOARD_ID = B.BOARD_ID
					WHERE 
						 A.BOARD_ID = #boardId#
	</select>
	<insert id="boardDAO.insertBoardEtc"  parameterClass="boardVO">
					INSERT INTO RFC_COMTNBBSETC
						( 
						BOARD_ID,
						THUMBNAIL_SCALE
						)
					VALUES (
						#boardId#,
						'N'
					)
	</insert>
	<update  id="boardDAO.updateBoardEtc"  parameterClass="boardEtcVO" >
					UPDATE
						RFC_COMTNBBSETC
					SET 	
						THUMBNAIL_FL=#thumbnailFl#,
						THUMBNAIL_WIDTH=#thumbnailWidth#,
						THUMBNAIL_HEIGHT=#thumbnailHeight#,
						THUMBNAIL_SCALE=#thumbnailScale#,
						BOARD_SEARCH_FL=#boardSearchFl#,
						BOARD_RSS_FL=#boardRssFl#,
						PROTECT_REPLY_CNT=#protectReplyCnt#,
						BOARD_ADMIN_FILTER_FL=#boardAdminFilterFl#,
						BOARD_CLEANER_FL=#boardCleanerFl#,
						JUMIN_FILTER_FL=#juminFilterFl#,
						FOREIGN_FILTER_FL=#foreignFilterFl#,
						CORPNUM_FILTER_FL=#corpnumFilterFl#,
						BIZNUM_FILTER_FL=#biznumFilterFl#,
						PHONE_FILTER_FL=#phoneFilterFl#,
						MOBILE_FILTER_FL=#mobileFilterFl#,
						EMAIL_FILTER_FL=#emailFilterFl#,
						HOMEPAGE_FILTER_FL=#homepageFilterFl#,
						EXTENSION_FILTER_FL=#extensionFilterFl#,
						FILTER_TEXT=#filterText#
					WHERE 
						BOARD_ID = #boardId#
	</update>
	<insert  id="boardDAO.insertAllBoardEtc"  parameterClass="boardEtcVO" >
					INSERT INTO RFC_COMTNBBSETC
						( 
						BOARD_ID,
						THUMBNAIL_FL,
						THUMBNAIL_WIDTH,
						THUMBNAIL_HEIGHT,
						THUMBNAIL_SCALE,
						BOARD_SEARCH_FL,
						BOARD_RSS_FL,
						PROTECT_REPLY_CNT,
						BOARD_ADMIN_FILTER_FL,
						BOARD_CLEANER_FL,
						JUMIN_FILTER_FL,
						FOREIGN_FILTER_FL,
						CORPNUM_FILTER_FL,
						BIZNUM_FILTER_FL,
						PHONE_FILTER_FL,
						MOBILE_FILTER_FL,
						EMAIL_FILTER_FL,
						HOMEPAGE_FILTER_FL,
						EXTENSION_FILTER_FL,
						FILTER_TEXT
						)
					VALUES (
						#boardId#,
						#thumbnailFl#,
						#thumbnailWidth#,
						#thumbnailHeight#,
						#thumbnailScale#,
						#boardSearchFl#,
						#boardRssFl#,
						#protectReplyCnt#,
						#boardAdminFilterFl#,
						#boardCleanerFl#,
						#juminFilterFl#,
						#foreignFilterFl#,
						#corpnumFilterFl#,
						#biznumFilterFl#,
						#phoneFilterFl#,
						#mobileFilterFl#,
						#emailFilterFl#,
						#homepageFilterFl#,
						#extensionFilterFl#,
						#filterText#
					)
	</insert>
</sqlMap>