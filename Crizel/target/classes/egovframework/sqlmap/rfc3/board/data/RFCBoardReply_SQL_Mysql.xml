<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="RFCBoardReplyManage">
	<typeAlias  alias="egovMap"      type = "egovframework.rte.psl.dataaccess.util.EgovMap"/>
    <typeAlias  alias="boardReplyVO"	 type = "egovframework.rfc3.board.vo.BoardReplyVO"/>
    
    <cacheModel type="${Globals.ibatis.default.cache}" id="RFCBoardReplyManageCache" readOnly="true" serialize="false">
      <flushInterval hours="24" />
      	<flushOnExecute statement="boardDAO.insertBoardReplyOffice"/>
      	<flushOnExecute statement="boardDAO.updateBoardReplyOffice"/>
      	<flushOnExecute statement="boardDAO.deleteBoardReplyOffice"/>
     </cacheModel>
    
    <select id="boardDAO.selectBoardReplyOfficeList"  parameterClass="boardReplyVO" resultClass="boardReplyVO" cacheModel="RFCBoardReplyManageCache">
    	SELECT
    		REPLY_SID replySid,
			BOARD_ID boardId,
			BOARD_SID boardSid,
			DATA_SID dataSid,
			PCODE pcode,
			OFFICE_IS_REG officeIsReg,
			OFFICE_REG_DP officeRegDp,
			REGISTER_DATE register_dt
    	FROM
    		RFC_COMTNBBSREPLY
    	WHERE
    		BOARD_ID = #boardId# AND DATA_SID = #dataSid#
    	ORDER BY
    		OFFICE_REG_DP ASC
    </select>
    <select id="boardDAO.getBoardReplyOffice"  parameterClass="boardReplyVO" resultClass="boardReplyVO" cacheModel="RFCBoardReplyManageCache">
    	SELECT
    		REPLY_SID replySid,
			BOARD_ID boardId,
			BOARD_SID boardSid,
			DATA_SID dataSid,
			PCODE pcode,
			OFFICE_IS_REG officeIsReg,
			OFFICE_REG_DP officeRegDp,
			REGISTER_DATE register_dt
    	FROM
    		RFC_COMTNBBSREPLY
    	WHERE
    		BOARD_ID = #boardId# AND DATA_SID = #dataSid# AND OFFICE_REG_DP = #officeRegDp#
    	ORDER BY
    		OFFICE_REG_DP ASC
    </select>
    <insert id="boardDAO.insertBoardReplyOffice" parameterClass="boardReplyVO"  >
    	INSERT INTO RFC_COMTNBBSREPLY
    	(
    		REPLY_SID,
			BOARD_ID,
			BOARD_SID,
			DATA_SID,
			PCODE ,
			OFFICE_IS_REG,
			OFFICE_REG_DP,
			REGISTER_DATE
    	)
    	VALUES
    	(
    		#replySid#,
			#boardId#,
			#boardSid#,
			#dataSid#,
			#pcode#,
			#officeIsReg#,
			#officeRegDp#,
			#register_dt#
    	)
    	
    </insert>
    <update id="boardDAO.updateBoardReplyOffice" parameterClass="boardReplyVO"  >
    	UPDATE RFC_COMTNBBSREPLY
    	SET
			PCODE=#pcode#,
			OFFICE_IS_REG=#officeIsReg#
		WHERE
			REPLY_SID = #replySid#    	
    </update>
    
    <delete id="boardDAO.deleteBoardReplyOffice" parameterClass="boardReplyVO"  >
    	DELETE FROM  RFC_COMTNBBSREPLY
		WHERE
			REPLY_SID = #replySid#    	
    </delete>
    <select id="boardDAO.listBoardReplyOffice"  parameterClass="boardReplyVO" resultClass="boardReplyVO" cacheModel="RFCBoardReplyManageCache">
    	SELECT
    		REPLY_SID replySid,
			BOARD_ID boardId,
			BOARD_SID boardSid,
			DATA_SID dataSid,
			PCODE pcode,
			OFFICE_IS_REG officeIsReg,
			OFFICE_REG_DP officeRegDp,
			REGISTER_DATE register_dt
    	FROM
    		RFC_COMTNBBSREPLY
    	WHERE
    		DATA_SID = #dataSid#
    	ORDER BY
    		OFFICE_REG_DP ASC
    </select>
</sqlMap>