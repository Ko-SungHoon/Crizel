<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="RFCAccessIp">
	 <typeAlias  alias="egovMap"      type = "egovframework.rte.psl.dataaccess.util.EgovMap"/>    
	 <typeAlias  alias="accessIpVO" type = "egovframework.rfc3.iam.vo.AccessIpVO"/>
	 
	  <cacheModel type="${Globals.ibatis.default.cache}" id="RFCAccessIpCache" readOnly="true" serialize="false">
     	<flushInterval hours="24" />
     	<flushOnExecute statement="accessIpDAO.insertAccessIP"/>
     	<flushOnExecute statement="accessIpDAO.deleteAccessIP"/>
     </cacheModel>
	 <select	id="accessIpDAO.selectAccessList"  parameterClass="java.lang.String" resultClass="accessIpVO"  cacheModel="RFCAccessIpCache" >
	 		  select 
	 				AIP_SID aipSid,
			        ATYPE atype,
			        ACCESS_IP accessIp,
			        MEMO memo
			  from 
			  		RFC_COMTNACCESSIP
			  where
			  	   ATYPE=#atype#
			  order by AIP_SID desc
	 </select>
	 
	 <select	id="accessIpDAO.isAccessIpCnt"  parameterClass="accessIpVO" resultClass="int"   cacheModel="RFCAccessIpCache">
	 		  select 
	 				count(*) cnt
			  from 
			  		RFC_COMTNACCESSIP
			  where
			  	   ATYPE=#atype# and ACCESS_IP=#accessIp#
	 </select>
	 
	 <insert id="accessIpDAO.insertAccessIP" parameterClass="accessIpVO" >
	 		insert into  RFC_COMTNACCESSIP( 
	 					AIP_SID,
	 					ATYPE,
	 					ACCESS_IP,
	 					MEMO 
	 					)  values (
	 					 #aipSid#,
	 					 #atype#,
	 					 #accessIp#,
	 					 #memo#
	 					 )
	 </insert>
	 
	 <delete	id="accessIpDAO.deleteAccessIP" parameterClass="long">
	 		delete from
	 			 RFC_COMTNACCESSIP
	 		where 
	 		    AIP_SID=#aipSid#
	 </delete>
	 
</sqlMap>