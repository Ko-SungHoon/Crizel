<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="RFCSiteGroup">
	 <typeAlias  alias="egovMap"      type = "egovframework.rte.psl.dataaccess.util.EgovMap"/>
     <typeAlias  alias="siteGroupVO" type = "egovframework.rfc3.iam.vo.SiteGroupVO"/>
      <!-- <typeAlias alias="MapCacheController" type="egovframework.rfc3.common.cache.EhCacheController"/>-->
     
     <resultMap id="siteGroup" class="egovframework.rfc3.iam.vo.SiteGroupVO">
        <result property="sgroupId" column="sgroupId" />
        <result property="sgroupNm" column="sgroupNm" />
        <result property="isUse" column="isUse" />
        <result property="createDate" column="createDate" />
        <result property="modifyDate" column="modifyDate"/>
    </resultMap>
     <cacheModel type="${Globals.ibatis.default.cache}" id="RFCSiteGroupCache" readOnly="true" serialize="false">
     	<flushInterval hours="24" />
     	<flushOnExecute statement="siteGroupDAO.insert"/>
     	<flushOnExecute statement="siteGroupDAO.updateSiteGroup"/>
     	<flushOnExecute statement="siteGroupDAO.delete"/>
     	<!--<property name="configFile" value="/ehcache.xml"/>-->
     </cacheModel>
    
  <!--  
	 <select id="siteGroupDAO.selectNextId"  parameterClass="egovframework.rfc3.common.vo.CodeSequence" resultClass="java.lang.String">
						SELECT 
							SGROUP_ID
						FROM
							RFC_COMTNSITEGROUP
						WHERE  SGROUP_ID  like '$delims$%'
						ORDER BY SGROUP_ID  DESC
						LIMIT 1
	 </select>
	 -->
	<select id="siteGroupDAO.selectSiteGroupListTotCnt"  parameterClass="siteGroupVO" resultClass="int"  cacheModel="RFCSiteGroupCache">
						SELECT 
								COUNT(*) totcnt
						 FROM 
						 (
								SELECT
											SGROUP_ID						sgroupId, 
											SGROUP_NM						sgroupNm,
											IS_USE								isUse,
											CREATE_DATE					createDate,
											MODIFY_DATE					modifyDate
								 FROM  RFC_COMTNSITEGROUP
						   )   A
						WHERE 1=1
						<isNotEmpty prepend="AND" property="searchCondition" >
			          		     $searchCondition$  LIKE '%$searchKeyword$%'
			            </isNotEmpty>
	</select>
	<select id="siteGroupDAO.selectSiteGroupList" parameterClass="siteGroupVO"  resultMap="siteGroup"  cacheModel="RFCSiteGroupCache">
          SELECT  * 
	        FROM (
			  SELECT ROWNUM RNUM, ALL_LIST.*  
			   FROM  
			  (
			          
			          SELECT 
								sgroupId,sgroupNm,isUse,createDate,modifyDate
						FROM 
						(
								SELECT
											SGROUP_ID	sgroupId, 
											SGROUP_NM	sgroupNm,
											IS_USE		isUse,
											CREATE_DATE	 createDate,
											MODIFY_DATE	 modifyDate
								 FROM  RFC_COMTNSITEGROUP
						   )   A
						WHERE 1=1
						<isNotEmpty prepend="AND" property="searchCondition" >
			          		   $searchCondition$   LIKE '%$searchKeyword$%'
			            </isNotEmpty>
			            <isNotEmpty  property="orderField" >
			            	  ORDER BY  $orderField$   $orderSort$
			            </isNotEmpty>
			            <isEmpty  property="orderField" >
			             	ORDER BY sgroupId  DESC
			             </isEmpty>
                         ) ALL_LIST
			      )
		  WHERE  RNUM  &gt; #firstIndex#
		  AND  RNUM &lt;= #firstIndex# + #recordCountPerPage#
	</select>
	
	<select id="siteGroupDAO.selectAllSiteGroupList"  parameterClass="java.lang.String"   resultMap="siteGroup"  cacheModel="RFCSiteGroupCache">
						SELECT
									SGROUP_ID	sgroupId, 
									SGROUP_NM	sgroupNm,
									IS_USE		isUse,
									CREATE_DATE	 createDate,
									MODIFY_DATE	 modifyDate
						 FROM  RFC_COMTNSITEGROUP
						 WHERE  IS_USE='1' 
						 <isNotEmpty >
			            	  AND SGROUP_ID like #sgroupId#
			            </isNotEmpty>
						ORDER BY SGROUP_ID  DESC
	</select>
	
	<select id="siteGroupDAO.selectSiteGroup"  parameterClass="java.lang.String"  resultClass="siteGroupVO"  cacheModel="RFCSiteGroupCache">
					SELECT 
							SGROUP_ID  sgroupId,
							SGROUP_NM  sgroupNm, 
							IS_USE AS isUse,
					  		CREATE_DATE   createDate,
					  		MODIFY_DATE  modifyDate
					  FROM 
					  	   RFC_COMTNSITEGROUP
					  WHERE SGROUP_ID = #sgroupId#
	</select>
	<insert id="siteGroupDAO.insert"  parameterClass="siteGroupVO">
					INSERT INTO RFC_COMTNSITEGROUP
						 ( SGROUP_ID      ,
						   SGROUP_NM     ,
						   IS_USE               ,
						   CREATE_DATE ,
						   MODIFY_DATE )
		           VALUES (
		                #sgroupId# ,
		                #sgroupNm# , 
		                #isUse#, 
		                #createDate# ,
		                #modifyDate# )
	</insert>
	<update  id="siteGroupDAO.updateSiteGroup"  parameterClass="siteGroupVO" >
					UPDATE
							  RFC_COMTNSITEGROUP
					  SET 	
					            SGROUP_NM=#sgroupNm#, 
								IS_USE =#isUse#,
				  				MODIFY_DATE=#modifyDate#
				  	  WHERE 
				  				SGROUP_ID = #sgroupId#
	</update>
	<delete id="siteGroupDAO.delete" parameterClass="java.lang.String">
					DELETE  FROM RFC_COMTNSITEGROUP
					WHERE  SGROUP_ID=#sgroupId#
	</delete>
	
</sqlMap>