<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="RFCUserManage">
	 <typeAlias  alias="egovMap"      type = "egovframework.rte.psl.dataaccess.util.EgovMap"/>
     <typeAlias  alias="userManageVO" type = "egovframework.rfc3.user.vo.UserManageVO"/>
     
      
     <resultMap id="userManage" class="egovframework.rfc3.user.vo.UserManageVO">
        <result property="uniqId" column="uniqId" />
        <result property="emplyrId" column="emplyrId" />
        <result property="emplyrNm" column="emplyrNm" />
        <result property="sgroupId" column="sgroupId" />
        <result property="groupId" column="groupId"/>
        <result property="emplyrSttusCode" column="emplyrSttusCode"/>
        <result property="sbscrbDe" column="sbscrbDe"/>
        <result property="officeNms" column="officeNms"/>
        <result property="sgroupNm" column="sgroupNm"/>
        <result property="groupNm" column="groupNm"/>
        <result property="userAuthCode" column="userAuthCode"/>
        <result property="ofcpsNm" column="ofcpsNm"/>
        <result property="orgnztId" column="orgnztId"/>
    </resultMap>
    
     <cacheModel type="${Globals.ibatis.default.cache}" id="RFCUserManageCache" readOnly="true" serialize="false">
     	<flushInterval hours="24" />
     	<flushOnExecute statement="userManageDAO.insertUser"/>
     	<flushOnExecute statement="userManageDAO.updateUser"/>
     	<flushOnExecute statement="userManageDAO.deleteUserId"/>
     	<flushOnExecute statement="userManageDAO.deleteUserIdForSitetGroup"/>
     	<flushOnExecute statement="userManageDAO.withdrawUser"/>
     </cacheModel>
    
	<select id="userManageDAO.selectUserManageListTotCnt"  parameterClass="userManageVO" resultClass="java.lang.Integer" cacheModel="RFCUserManageCache">
						SELECT
							  count(*) totcnt
						FROM
						    RFC_COMTNMANAGER A  INNER JOIN RFC_COMTNSITEGROUP B ON A.SITE_GROUP_ID = B.SGROUP_ID
						WHERE  1=1   and B.IS_USE='1'
						<isNotEmpty prepend="AND" property="searchCondition" >
			          		     $searchCondition$  LIKE '%$searchKeyword$%'
			            </isNotEmpty>
			            <isNotEmpty prepend="AND" property="sgroupId" >
			          		   SITE_GROUP_ID   LIKE  #sgroupId#
			            </isNotEmpty>
			            <isNotEmpty prepend="AND" property="emplyrSttusCode" >
			          		   EMPLYR_STTUS_CODE   LIKE #emplyrSttusCode#
			            </isNotEmpty>
			            <isNotEmpty prepend="AND" property="groupId" >
			          		   GROUP_ID   LIKE #groupId#
			            </isNotEmpty>
			            <isNotEmpty prepend="AND"  property="roleId" >
			             	(EMPLYR_ID in 
		             		              (
			             		  			select
			             		  				 SUBJECT_ID 
			             		  			from  RFC_COMTNAUTHORITES where  1=1 
			             		  			<isNotEmpty prepend="AND" property="sgroupId" >
								          		   SGROUP_ID   LIKE  #sgroupId#
								           </isNotEmpty>
			             		  			 and  ROLE_ID like  #roleId#
		             		  			  )
		             	  or 
		             	  GROUP_ID  in 
		             		              (
			             		  			select
			             		  				 SUBJECT_ID 
			             		  			from  RFC_COMTNAUTHORITES where  1=1 
			             		  			<isNotEmpty prepend="AND" property="sgroupId" >
								          		   SGROUP_ID   LIKE  #sgroupId#
								           </isNotEmpty>
			             		  			 and  ROLE_ID like  #roleId#
		             		  			  )
		             	  )
	             		 </isNotEmpty>
			         
	             		 <isNotEmpty prepend="AND"  property="orgnztId" >
	             			 			 ORGNZT_ID   LIKE  '$orgnztId$%'
	             		 </isNotEmpty>
	</select>
	<select id="userManageDAO.selectUserManageList" parameterClass="userManageVO"  resultMap="userManage" cacheModel="RFCUserManageCache">
   SELECT  * 
      FROM (
		SELECT ROWNUM RNUM, ALL_LIST.*  
		FROM  
		(
				SELECT
			          		UNIQ_ID uniqId,
			          		EMPLYR_ID emplyrId,
			          		EMPLYR_NM emplyrNm,
			          		SITE_GROUP_ID sgroupId,
			          		GROUP_ID groupId,
			          		EMPLYR_STTUS_CODE emplyrSttusCode,
			          		SBSCRB_DE sbscrbDe,
			          		A.MODIFY_DATE modifyDate,
			          		A.USER_AUTH_CODE userAuthCode,
			          		ORGNZT_ID orgnztId,
						    OFCPS_NM ofcpsNm,
		          			case
							(select OFFICE_DP from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID)
                                      when 4 then
                                        (select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD =(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID))))
                                        ||'/'
                                        ||(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD =(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID)))
                                        ||'/'
                                        ||(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD =(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID))
                                        ||'/'
                                        ||(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID)
                                      
                                        when 3 then
                                        (select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD =(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID)))
                                        ||'/'
                                        ||(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD =(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID))
                                        ||'/'
                                        ||(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID)
                                        
                                        when 2 then
                                        (select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD =(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID))
                                        ||'/'
                                        ||(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID)
                                       
                                     	when 1 then
										(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID)
                             end 
	                          as officeNms,
			          		(select  SGROUP_NM from  RFC_COMTNSITEGROUP where  SGROUP_ID =A.SITE_GROUP_ID )  sgroupNm,
			          		(select  GROUP_NM from  RFC_COMTNGROUP where  GROUP_ID =A.GROUP_ID )  groupNm
						FROM
						    RFC_COMTNMANAGER A  INNER JOIN RFC_COMTNSITEGROUP B ON A.SITE_GROUP_ID = B.SGROUP_ID
						WHERE  1=1  and B.IS_USE='1'
						<isNotEmpty prepend="AND" property="searchCondition" >
			          		     $searchCondition$  LIKE '%$searchKeyword$%'
			            </isNotEmpty>
			            <isNotEmpty prepend="AND" property="sgroupId" >
			          		   SITE_GROUP_ID   LIKE  #sgroupId#
			            </isNotEmpty>
			            <isNotEmpty prepend="AND" property="emplyrSttusCode" >
			          		   EMPLYR_STTUS_CODE   LIKE #emplyrSttusCode#
			            </isNotEmpty>
			            <isNotEmpty prepend="AND" property="groupId" >
			          		   GROUP_ID   LIKE #groupId#
			            </isNotEmpty>
	          		  <isNotEmpty prepend="AND"  property="roleId" >
			                 	(EMPLYR_ID in 
		             		              (
			             		  			select
			             		  				 SUBJECT_ID 
			             		  			from  RFC_COMTNAUTHORITES where  1=1 
			             		  			<isNotEmpty prepend="AND" property="sgroupId" >
								          		   SGROUP_ID   LIKE  #sgroupId#
								           </isNotEmpty>
			             		  			 and  ROLE_ID like  #roleId#
		             		  			  )
		             	  or 
		             	  GROUP_ID  in 
		             		              (
			             		  			select
			             		  				 SUBJECT_ID 
			             		  			from  RFC_COMTNAUTHORITES where  1=1 
			             		  			<isNotEmpty prepend="AND" property="sgroupId" >
								          		   SGROUP_ID   LIKE  #sgroupId#
								           </isNotEmpty>
			             		  			 and  ROLE_ID like  #roleId#
		             		  			  )
		             	  )
	             		 </isNotEmpty>
			            <isNotEmpty prepend="AND"  property="orgnztId" >
	             			 			 ORGNZT_ID   LIKE   '$orgnztId$%'
	             		 </isNotEmpty>
			            <isNotEmpty  property="orderField" >
			            	  ORDER BY  $orderField$   $orderSort$
			            </isNotEmpty>
			            <isEmpty  property="orderField" >
			             	ORDER BY UNIQ_ID  DESC
			             </isEmpty>
			             ) ALL_LIST
	      )
  WHERE  RNUM  &gt; #firstIndex#
  AND  RNUM &lt;= #firstIndex# + #recordCountPerPage#
	</select>
	
	<select id="userManageDAO.getUserInfoUnique"  parameterClass="java.util.HashMap"  resultClass="userManageVO"  cacheModel="RFCUserManageCache">
				select 
						UNIQ_ID uniqId ,
						EMPLYR_ID emplyrId,
						EMPLYR_NM emplyrNm,
						IHID_NUM ihidnum,
						EMPL_NO emplNo,
						PASSWORD password,
						PASSWORD_CNSR passwordCnsr,
						PASSWORD_HINT passwordHint,
						ZIP zip,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,HOME_ADRES) homeadres,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,DETAIL_ADRES) detailAdres,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,AREA_NO) areaNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MIDDLETEL_NO) middleTelno,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,ENDTEL_NO) endTelno,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLFRIST_NO) moblfristNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLMIDDLE_NO) moblmiddleNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLEND_NO) moblendNo,
						OFFMTEL_NO offmTelno,
						FX_NUM fxnum,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,EMAIL_ADRES) emailAdres,
						EMAIL_YN emailYn,
						HOMEPAGE homepage,
						SEX_DSTN_CODE sexdstnCode,
						BRTH_GUBUN brthGubun,
						BRTH brth,
						SITE_GROUP_ID sgroupId,
						GROUP_ID groupId,
						ORGNZT_ID orgnztId,
						OFCPS_NM ofcpsNm,
						EMPLYR_STTUS_CODE emplyrSttusCode,
						SUB_DN subDn,
						PHOTO_IMAGE photoImage,
						SBSCRB_DE sbscrbDe,
						MODIFY_DATE modifyDate,
						USER_ETC1 userEtc1,
						USER_ETC2 userEtc2,
						USER_ETC3 userEtc3,
						USER_ETC4 userEtc4,
						USER_ETC5 userEtc5,
						USER_ETC6 userEtc6,
						USER_ETC7 userEtc7,
						USER_ETC8 userEtc8,
						USER_ETC9 userEtc9,
						USER_ETC10 userEtc10,
						USER_AUTH_CODE userAuthCode,
						USER_LEVEL userLevel,
						EMAIL_LOGIN_PASSWORD emailLoginPassword,
			     		EMAIL_STTUS_CODE emailSttusCode
					from 
						RFC_COMTNMANAGER
					where
						UNIQ_ID=#uniqId#
	</select>
	
	
	<select id="userManageDAO.getUserInfoEmplyr"  parameterClass="java.util.HashMap"  resultClass="userManageVO"  cacheModel="RFCUserManageCache">
				select 
						UNIQ_ID uniqId ,
						EMPLYR_ID emplyrId,
						EMPLYR_NM emplyrNm,
						IHID_NUM ihidnum,
						EMPL_NO emplNo,
						PASSWORD password,
						PASSWORD_CNSR passwordCnsr,
						PASSWORD_HINT passwordHint,
						ZIP zip,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,HOME_ADRES) homeadres,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,DETAIL_ADRES) detailAdres,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,AREA_NO) areaNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MIDDLETEL_NO) middleTelno,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,ENDTEL_NO) endTelno,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLFRIST_NO) moblfristNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLMIDDLE_NO) moblmiddleNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLEND_NO) moblendNo,
						OFFMTEL_NO offmTelno,
						FX_NUM fxnum,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,EMAIL_ADRES) emailAdres,
						EMAIL_YN emailYn,
						HOMEPAGE homepage,
						SEX_DSTN_CODE sexdstnCode,
						BRTH_GUBUN brthGubun,
						BRTH brth,
						SITE_GROUP_ID sgroupId,
						GROUP_ID groupId,
						ORGNZT_ID orgnztId,
						OFCPS_NM ofcpsNm,
						EMPLYR_STTUS_CODE emplyrSttusCode,
						SUB_DN subDn,
						PHOTO_IMAGE photoImage,
						SBSCRB_DE sbscrbDe,
						MODIFY_DATE modifyDate,
						USER_ETC1 userEtc1,
						USER_ETC2 userEtc2,
						USER_ETC3 userEtc3,
						USER_ETC4 userEtc4,
						USER_ETC5 userEtc5,
						USER_ETC6 userEtc6,
						USER_ETC7 userEtc7,
						USER_ETC8 userEtc8,
						USER_ETC9 userEtc9,
						USER_ETC10 userEtc10,
						USER_AUTH_CODE userAuthCode,
						USER_LEVEL userLevel,
						EMAIL_LOGIN_PASSWORD emailLoginPassword,
			     		EMAIL_STTUS_CODE emailSttusCode
					from 
						RFC_COMTNMANAGER
					where
						EMPLYR_ID=#emplyrId#
	</select>
	
	<select id="userManageDAO.searchUserId"    resultClass="userManageVO"  cacheModel="RFCUserManageCache">
				select 
						UNIQ_ID uniqId ,
					    EMPLYR_ID emplyrId,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,AREA_NO) areaNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MIDDLETEL_NO) middleTelno,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,ENDTEL_NO) endTelno,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLFRIST_NO) moblfristNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLMIDDLE_NO) moblmiddleNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLEND_NO) moblendNo,
						USER_AUTH_CODE userAuthCode,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,EMAIL_ADRES) emailAdres 
					from 
						RFC_COMTNMANAGER
					where
						IHID_NUM IS NOT NULL AND IHID_NUM = #ihidnum# AND EMPLYR_NM=#emplyrNm#
	</select>
	
	<select id="userManageDAO.searchUserPw"    resultClass="userManageVO"  cacheModel="RFCUserManageCache">
				select 
						UNIQ_ID uniqId ,
						EMPLYR_ID emplyrId,
						EMPLYR_NM emplyrNm,
						IHID_NUM ihidnum,
						PASSWORD_CNSR passwordCnsr,
						PASSWORD_HINT passwordHint,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,AREA_NO) areaNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MIDDLETEL_NO) middleTelno,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,ENDTEL_NO) endTelno,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLFRIST_NO) moblfristNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLMIDDLE_NO) moblmiddleNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLEND_NO) moblendNo,
						USER_AUTH_CODE userAuthCode,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,EMAIL_ADRES) emailAdres 
					from 
						RFC_COMTNMANAGER
					where
						IHID_NUM IS NOT NULL AND IHID_NUM = #ihidnum# AND EMPLYR_NM=#emplyrNm# AND EMPLYR_ID=#emplyrId#
	</select>
		
	<select id="userManageDAO.isExistUserId"   resultClass="java.lang.Integer"  cacheModel="RFCUserManageCache">
		 <![CDATA[
              SELECT 
            		COUNT(1) usedCnt
                FROM 
                (
	                SELECT
	                    EMPLYR_ID             userId
	                FROM    RFC_COMTNMANAGER
	                UNION ALL
	                SELECT
	                    MBER_ID               userId
	                FROM    RFC_COMTNMEMBER
                ) A
              WHERE userId = #checkId#
          ]]>
	</select>
	
	<insert id="userManageDAO.insertUser" parameterClass="userManageVO">
				INSERT INTO 
				  RFC_COMTNMANAGER  (
					UNIQ_ID,
					EMPLYR_ID,
					EMPLYR_NM,
					IHID_NUM,
					EMPL_NO,
					PASSWORD,
					PASSWORD_CNSR,
					PASSWORD_HINT,
					ZIP,
					HOME_ADRES,
					DETAIL_ADRES,
					AREA_NO,
					MIDDLETEL_NO,
					ENDTEL_NO,
					MOBLFRIST_NO,
					MOBLMIDDLE_NO,
					MOBLEND_NO,
					OFFMTEL_NO,
					FX_NUM,
					EMAIL_ADRES,
					EMAIL_YN,
					HOMEPAGE,
					SEX_DSTN_CODE,
					BRTH_GUBUN,
					BRTH,
					SITE_GROUP_ID,
					GROUP_ID,
					ORGNZT_ID,
					OFCPS_NM,
					EMPLYR_STTUS_CODE,
					SUB_DN,
					PHOTO_IMAGE,
					SBSCRB_DE,
					USER_ETC1,
					USER_ETC2,
					USER_ETC3,
					USER_ETC4,
					USER_ETC5,
					USER_ETC6,
					USER_ETC7,
					USER_ETC8,
					USER_ETC9,
					USER_ETC10,
					USER_LEVEL,
					USER_AUTH_CODE,
					EMAIL_LOGIN_PASSWORD,
		     		EMAIL_STTUS_CODE
					) VALUES (
					 #uniqId# ,
					 #emplyrId#, 
					#emplyrNm# , 
					#ihidnum#, 
					#emplNo#,
					#password# , 
					#passwordCnsr#,
					#passwordHint# ,
					#zip# ,
					SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#homeadres#),
					SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#detailAdres#),
					SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#areaNo#),
					SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#middleTelno#), 
					SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#endTelno#),
					SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#moblfristNo#),
					SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#moblmiddleNo#),
					SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#moblendNo#),
					#offmTelno# , 
					#fxnum#,
					SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#emailAdres#), 
					#emailYn#,
					#homepage# , 
					#sexdstnCode#, 
					#brthGubun#, 
					#brth#,
					#sgroupId# , 
					#groupId#,
					#orgnztId#, 
					#ofcpsNm#,
					#emplyrSttusCode# ,
					#subDn# , 
					#photoImage#, 
					#sbscrbDe#, 
					#userEtc1#, 
					#userEtc2#,
					#userEtc3# ,
					#userEtc4# ,
					#userEtc5# ,
					#userEtc6# , 
					#userEtc7#, 
					#userEtc8#, 
					#userEtc9#, 
					#userEtc10#, 
					#userLevel#,
					#userAuthCode#,
					#emailLoginPassword#,
		     		#emailSttusCode#
				)
	</insert>
	
	<update id="userManageDAO.updateUser" parameterClass="userManageVO">
				UPDATE
					 RFC_COMTNMANAGER
			SET 
					EMPLYR_NM=#emplyrNm#,
					IHID_NUM=#ihidnum#,
					EMPL_NO=#emplNo#,
					PASSWORD=#password#,
					PASSWORD_CNSR=#passwordCnsr#,
					PASSWORD_HINT=#passwordHint#,
					ZIP=#zip#,
					HOME_ADRES=SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#homeadres#),
					DETAIL_ADRES=SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#detailAdres#),
					AREA_NO=SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#areaNo#),
					MIDDLETEL_NO=SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#middleTelno#),
					ENDTEL_NO=SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#endTelno#),
					MOBLFRIST_NO=SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#moblfristNo#),
					MOBLMIDDLE_NO=SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#moblmiddleNo#),
					MOBLEND_NO=SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#moblendNo#),
					OFFMTEL_NO=#offmTelno#,
					FX_NUM=#fxnum#,
					EMAIL_ADRES=SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#emailAdres#),
					EMAIL_YN=#emailYn#,
					HOMEPAGE=#homepage#,
					SEX_DSTN_CODE=#sexdstnCode#,
					BRTH_GUBUN=#brthGubun#,
					BRTH=#brth#,
					SITE_GROUP_ID=#sgroupId#,
					GROUP_ID=#groupId#,
					ORGNZT_ID=#orgnztId#,
					OFCPS_NM=#ofcpsNm#,
					EMPLYR_STTUS_CODE=#emplyrSttusCode#,
					SUB_DN=#subDn#,
					PHOTO_IMAGE=#photoImage#,
					SBSCRB_DE=#sbscrbDe#,
					USER_ETC1=#userEtc1#,
					USER_ETC2=#userEtc2#,
					USER_ETC3=#userEtc3#,
					USER_ETC4=#userEtc4#,
					USER_ETC5=#userEtc5#,
					USER_ETC6=#userEtc6#,
					USER_ETC7=#userEtc7#,
					USER_ETC8=#userEtc8#,
					USER_ETC9=#userEtc9#,
					USER_ETC10=#userEtc10#,
					USER_LEVEL=#userLevel#,
					MODIFY_DATE=sysdate,
					USER_AUTH_CODE =  #userAuthCode#,
					EMAIL_LOGIN_PASSWORD = #emailLoginPassword#,
		     		EMAIL_STTUS_CODE = #emailSttusCode#
				WHERE 
					 UNIQ_ID=#uniqId#
	</update>
	
   <update id="userManageDAO.withdrawUser" parameterClass="String">
				UPDATE
					 RFC_COMTNMANAGER
			SET 
					IHID_NUM='',
					PASSWORD='',
					PASSWORD_CNSR='',
					PASSWORD_HINT='',
					ZIP='',
					HOME_ADRES='',
					DETAIL_ADRES='',
					AREA_NO='',
					MIDDLETEL_NO='',
					ENDTEL_NO='',
					MOBLFRIST_NO='',
					MOBLMIDDLE_NO='',
					MOBLEND_NO='',
					OFFMTEL_NO='',
					FX_NUM='',
					EMAIL_ADRES='',
					HOMEPAGE='',
					EMPLYR_STTUS_CODE='D',
					MODIFY_DATE=sysdate,
					EMAIL_LOGIN_PASSWORD = '',
		     		EMAIL_STTUS_CODE = 'D'
				WHERE 
					 UNIQ_ID=#uniqId#
	</update>
    
    <delete id="userManageDAO.deleteUserId" >
    		DELETE FROM
    			 RFC_COMTNMANAGER
		  WHERE 
			    UNIQ_ID=#uniqId#
    </delete>
    
    <delete id="userManageDAO.deleteUserIdForSitetGroup" >
    		DELETE FROM
    			 RFC_COMTNMANAGER
		  WHERE 
			    SITE_GROUP_ID=#sgroupId#
    </delete>
    <select id="userManageDAO.getUserInfoMobile"  parameterClass="userManageVO"  resultClass="userManageVO"  cacheModel="RFCUserManageCache">
		<![CDATA[
				select 
						UNIQ_ID uniqId ,
						EMPLYR_ID emplyrId,
						EMPLYR_NM emplyrNm,
						IHID_NUM ihidnum,
						EMPL_NO emplNo,
						PASSWORD password,
						PASSWORD_CNSR passwordCnsr,
						PASSWORD_HINT passwordHint,
						ZIP zip,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,HOME_ADRES) homeadres,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,DETAIL_ADRES) detailAdres,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,AREA_NO) areaNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MIDDLETEL_NO) middleTelno,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,ENDTEL_NO) endTelno,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLFRIST_NO) moblfristNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLMIDDLE_NO) moblmiddleNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLEND_NO) moblendNo,
						OFFMTEL_NO offmTelno,
						FX_NUM fxnum,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,EMAIL_ADRES) emailAdres,
						EMAIL_YN emailYn,
						HOMEPAGE homepage,
						SEX_DSTN_CODE sexdstnCode,
						BRTH_GUBUN brthGubun,
						BRTH brth,
						SITE_GROUP_ID sgroupId,
						GROUP_ID groupId,
						ORGNZT_ID orgnztId,
						OFCPS_NM ofcpsNm,
						EMPLYR_STTUS_CODE emplyrSttusCode,
						SUB_DN subDn,
						PHOTO_IMAGE photoImage,
						SBSCRB_DE sbscrbDe,
						MODIFY_DATE modifyDate,
						USER_ETC1 userEtc1,
						USER_ETC2 userEtc2,
						USER_ETC3 userEtc3,
						USER_ETC4 userEtc4,
						USER_ETC5 userEtc5,
						USER_ETC6 userEtc6,
						USER_ETC7 userEtc7,
						USER_ETC8 userEtc8,
						USER_ETC9 userEtc9,
						USER_ETC10 userEtc10,
						USER_AUTH_CODE userAuthCode,
						USER_LEVEL userLevel
					from 
						RFC_COMTNMANAGER
					where
						MOBLFRIST_NO = ECL_ENCRYPT(#moblfristNo#) AND MOBLMIDDLE_NO = ECL_ENCRYPT(#moblmiddleNo#) AND MOBLEND_NO = ECL_ENCRYPT(#moblendNo#)
			]]>
	</select>
	
	<select id="userManageDAO.selectManageListUCmessenger"    resultClass="userManageVO"  cacheModel="RFCUserManageCache">
select 
						UNIQ_ID uniqId ,
						EMPLYR_ID emplyrId,
						EMPLYR_NM emplyrNm,
						IHID_NUM ihidnum,
						EMPL_NO emplNo,
						PASSWORD password,
						PASSWORD_CNSR passwordCnsr,
						PASSWORD_HINT passwordHint,
						ZIP zip,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,HOME_ADRES) homeadres,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,DETAIL_ADRES) detailAdres,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,AREA_NO) areaNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MIDDLETEL_NO) middleTelno,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,ENDTEL_NO) endTelno,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLFRIST_NO) moblfristNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLMIDDLE_NO) moblmiddleNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLEND_NO) moblendNo,
						OFFMTEL_NO offmTelno,
						FX_NUM fxnum,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,EMAIL_ADRES) emailAdres,
						EMAIL_YN emailYn,
						HOMEPAGE homepage,
						SEX_DSTN_CODE sexdstnCode,
						BRTH_GUBUN brthGubun,
						BRTH brth,
						SITE_GROUP_ID sgroupId,
						GROUP_ID groupId,
						ORGNZT_ID orgnztId,
						OFCPS_NM ofcpsNm,
						EMPLYR_STTUS_CODE emplyrSttusCode,
						SUB_DN subDn,
						PHOTO_IMAGE photoImage,
						SBSCRB_DE sbscrbDe,
						MODIFY_DATE modifyDate,
						USER_ETC1 userEtc1,
						USER_ETC2 userEtc2,
						USER_ETC3 userEtc3,
						USER_ETC4 userEtc4,
						USER_ETC5 userEtc5,
						USER_ETC6 userEtc6,
						USER_ETC7 userEtc7,
						USER_ETC8 userEtc8,
						USER_ETC9 userEtc9,
						USER_ETC10 userEtc10,
						USER_AUTH_CODE userAuthCode,
						USER_LEVEL userLevel,
						case
							(select OFFICE_DP from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID)
                                      when 4 then
                                        (select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD =(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID))))
                                        ||'/'
                                        ||(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD =(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID)))
                                        ||'/'
                                        ||(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD =(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID))
                                        ||'/'
                                        ||(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID)
                                      
                                        when 3 then
                                        (select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD =(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID)))
                                        ||'/'
                                        ||(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD =(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID))
                                        ||'/'
                                        ||(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID)
                                        
                                        when 2 then
                                        (select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD =(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID))
                                        ||'/'
                                        ||(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID)
                                       
                                     	when 1 then
										(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=A.ORGNZT_ID)
                             end 
	                          as officeNms
					from 
						RFC_COMTNMANAGER A
					where
						EMPLYR_STTUS_CODE='P'
						
						 <isNotEmpty prepend="AND"  property="orgnztId" >
	             			 			 ORGNZT_ID   LIKE    #orgnztId# || '%'
	             		 </isNotEmpty>
	             		 
						ORDER BY EMPLYR_NM  ASC
</select>
	<select id="userManageDAO.getUserInfoCerti"    resultClass="userManageVO"  cacheModel="RFCUserManageCache">
				select 
						UNIQ_ID uniqId ,
						EMPLYR_ID emplyrId,
						EMPLYR_NM emplyrNm,
						IHID_NUM ihidnum,
						EMPL_NO emplNo,
						PASSWORD password,
						PASSWORD_CNSR passwordCnsr,
						PASSWORD_HINT passwordHint,
						ZIP zip,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,HOME_ADRES) homeadres,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,DETAIL_ADRES) detailAdres,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,AREA_NO) areaNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MIDDLETEL_NO) middleTelno,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,ENDTEL_NO) endTelno,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLFRIST_NO) moblfristNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLMIDDLE_NO) moblmiddleNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLEND_NO) moblendNo,
						OFFMTEL_NO offmTelno,
						FX_NUM fxnum,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,EMAIL_ADRES) emailAdres,
						EMAIL_YN emailYn,
						HOMEPAGE homepage,
						SEX_DSTN_CODE sexdstnCode,
						BRTH_GUBUN brthGubun,
						BRTH brth,
						SITE_GROUP_ID sgroupId,
						GROUP_ID groupId,
						ORGNZT_ID orgnztId,
						OFCPS_NM ofcpsNm,
						EMPLYR_STTUS_CODE emplyrSttusCode,
						SUB_DN subDn,
						PHOTO_IMAGE photoImage,
						SBSCRB_DE sbscrbDe,
						MODIFY_DATE modifyDate,
						USER_ETC1 userEtc1,
						USER_ETC2 userEtc2,
						USER_ETC3 userEtc3,
						USER_ETC4 userEtc4,
						USER_ETC5 userEtc5,
						USER_ETC6 userEtc6,
						USER_ETC7 userEtc7,
						USER_ETC8 userEtc8,
						USER_ETC9 userEtc9,
						USER_ETC10 userEtc10,
						USER_AUTH_CODE userAuthCode,
						USER_LEVEL userLevel
					from 
						RFC_COMTNMANAGER
					where
						EMPLYR_NM = #emplyrNm#
						AND EMAIL_ADRES = ECL_ENCRYPT(#emailAdres#)
						<isNotEmpty prepend="AND"  property="moblfristNo" >
							MOBLFRIST_NO = ECL_ENCRYPT(#moblfristNo#)
						</isNotEmpty>
						<isNotEmpty prepend="AND"  property="moblmiddleNo" >
							MOBLMIDDLE_NO = ECL_ENCRYPT(#moblmiddleNo#)
						</isNotEmpty>
						<isNotEmpty prepend="AND"  property="moblendNo" >
							MOBLEND_NO = ECL_ENCRYPT(#moblendNo#)
						</isNotEmpty>
	</select>
	
	<update id="userManageDAO.updateUserofficePart" parameterClass="userManageVO">
			UPDATE
					 RFC_COMTNMANAGER
			SET 
					ORGNZT_ID=#orgnztId#
				WHERE 
					 UNIQ_ID=#uniqId#
				
	</update>
	
	<select id="userManageDAO.getUserInfoEmail"  parameterClass="userManageVO"  resultClass="userManageVO"  cacheModel="RFCUserManageCache">
		<![CDATA[
				select 
						UNIQ_ID uniqId ,
						EMPLYR_ID emplyrId,
						EMPLYR_NM emplyrNm,
						IHID_NUM ihidnum,
						EMPL_NO emplNo,
						PASSWORD password,
						PASSWORD_CNSR passwordCnsr,
						PASSWORD_HINT passwordHint,
						ZIP zip,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,HOME_ADRES) homeadres,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,DETAIL_ADRES) detailAdres,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,AREA_NO) areaNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MIDDLETEL_NO) middleTelno,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,ENDTEL_NO) endTelno,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLFRIST_NO) moblfristNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLMIDDLE_NO) moblmiddleNo,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,MOBLEND_NO) moblendNo,
						OFFMTEL_NO offmTelno,
						FX_NUM fxnum,
						SCP.DEC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,EMAIL_ADRES) emailAdres,
						EMAIL_YN emailYn,
						HOMEPAGE homepage,
						SEX_DSTN_CODE sexdstnCode,
						BRTH_GUBUN brthGubun,
						BRTH brth,
						SITE_GROUP_ID sgroupId,
						GROUP_ID groupId,
						ORGNZT_ID orgnztId,
						OFCPS_NM ofcpsNm,
						EMPLYR_STTUS_CODE emplyrSttusCode,
						SUB_DN subDn,
						PHOTO_IMAGE photoImage,
						SBSCRB_DE sbscrbDe,
						MODIFY_DATE modifyDate,
						USER_ETC1 userEtc1,
						USER_ETC2 userEtc2,
						USER_ETC3 userEtc3,
						USER_ETC4 userEtc4,
						USER_ETC5 userEtc5,
						USER_ETC6 userEtc6,
						USER_ETC7 userEtc7,
						USER_ETC8 userEtc8,
						USER_ETC9 userEtc9,
						USER_ETC10 userEtc10,
						USER_AUTH_CODE userAuthCode,
						USER_LEVEL userLevel,
						EMAIL_LOGIN_PASSWORD emailLoginPassword,
		     			EMAIL_STTUS_CODE emailSttusCode
					from 
						RFC_COMTNMANAGER
					where
						EMAIL_ADRES = ECL_ENCRYPT(#emailAdres#)
			]]>
	</select>
	
	<update id="userManageDAO.eminwonUpdateUser" parameterClass="userManageVO">
				UPDATE
					 RFC_COMTNMANAGER
			SET 
					AREA_NO=SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#areaNo#),
					MIDDLETEL_NO=SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#middleTelno#), 
					ENDTEL_NO=SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#endTelno#),
					OFFMTEL_NO=#offmTelno#,
					FX_NUM=#fxnum#,
					EMAIL_ADRES=SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#emailAdres#),
					OFCPS_NM=#ofcpsNm#,
					ORGNZT_ID=#orgnztId#,
					USER_AUTH_CODE = #userAuthCode#,
					MODIFY_DATE=sysdate
				where
						EMPLYR_ID=#emplyrId#
	</update>
	
					
    <select id="userManageDAO.getOfficeUserInfo"   parameterClass="java.lang.String"  resultClass="userManageVO">
				select 
						USR.UNIQ_ID uniqId ,
						USR.EMPLYR_ID emplyrId,
						USR.EMPLYR_NM emplyrNm,
						USR.IHID_NUM ihidnum,
						USR.EMPL_NO emplNo,
						USR.PASSWORD password,
						USR.PASSWORD_CNSR passwordCnsr,
						USR.PASSWORD_HINT passwordHint,
						USR.ZIP zip,
						USR.HOME_ADRES homeadres,
						USR.DETAIL_ADRES detailAdres,
						USR.AREA_NO areaNo,
						USR.MIDDLETEL_NO middleTelno,
						USR.ENDTEL_NO endTelno,
						USR.MOBLFRIST_NO moblfristNo,
						USR.MOBLMIDDLE_NO moblmiddleNo,
						USR.MOBLEND_NO moblendNo,
						USR.OFFMTEL_NO offmTelno,
						USR.FX_NUM fxnum,
						USR.EMAIL_ADRES emailAdres,
						USR.EMAIL_YN emailYn,
						USR.HOMEPAGE homepage,
						USR.SEX_DSTN_CODE sexdstnCode,
						USR.BRTH_GUBUN brthGubun,
						USR.BRTH brth,
						USR.SITE_GROUP_ID sgroupId,
						USR.GROUP_ID groupId,
						USR.ORGNZT_ID orgnztId,
						USR.OFCPS_NM ofcpsNm,
						case
							(select OFFICE_DP from RFC_COMTCOFFICE where OFFICE_CD=USR.ORGNZT_ID)
                                      when 4 then
                                        (select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD =(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=USR.ORGNZT_ID))))
                                        ||'/'
                                        ||(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD =(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=USR.ORGNZT_ID)))
                                        ||'/'
                                        ||(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD =(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=USR.ORGNZT_ID))
                                        ||'/'
                                        ||(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=USR.ORGNZT_ID)
                                      
                                        when 3 then
                                        (select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD =(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=USR.ORGNZT_ID)))
                                        ||'/'
                                        ||(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD =(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=USR.ORGNZT_ID))
                                        ||'/'
                                        ||(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=USR.ORGNZT_ID)
                                        
                                        when 2 then
                                        (select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD =(select OFFICE_PARENT_CD from RFC_COMTCOFFICE where OFFICE_CD=USR.ORGNZT_ID))
                                        ||'/'
                                        ||(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=USR.ORGNZT_ID)
                                       
                                     	when 1 then
										(select OFFICE_NM from RFC_COMTCOFFICE where OFFICE_CD=USR.ORGNZT_ID)
                             end 
	                          as officeNms,
	                    (select OFFICE_DP from RFC_COMTCOFFICE where OFFICE_CD=USR.ORGNZT_ID) as officeDp,    
						USR.EMPLYR_STTUS_CODE emplyrSttusCode,
						USR.SUB_DN subDn,
						USR.PHOTO_IMAGE photoImage,
						USR.SBSCRB_DE sbscrbDe,
						USR.MODIFY_DATE modifyDate,
						USR.USER_ETC1 userEtc1,
						USR.USER_ETC2 userEtc2,
						USR.USER_ETC3 userEtc3,
						USR.USER_ETC4 userEtc4,
						USR.USER_ETC5 userEtc5,
						USR.USER_ETC6 userEtc6,
						USR.USER_ETC7 userEtc7,
						USR.USER_ETC8 userEtc8,
						USR.USER_ETC9 userEtc9,
						USR.USER_ETC10 userEtc10,
						USR.USER_AUTH_CODE userAuthCode,
						USR.USER_LEVEL userLevel,
						USR.EMAIL_LOGIN_PASSWORD emailLoginPassword,
			     		USR.EMAIL_STTUS_CODE emailSttusCode,
			     		USR.LOGIN_FIRST_EVENT_YN loginFirstEventYn,
			     		OFFICE.OFFICE_REAL_CODE officerealcode
					from 
						RFC_COMTNMANAGER USR INNER JOIN RFC_COMTCOFFICE OFFICE ON USR.ORGNZT_ID =  OFFICE.OFFICE_CD
						INNER JOIN RFC_COMTCOFFICE_PART PART ON USR.EMPLYR_ID =  PART.USER_ID
					where
						ORGNZT_ID   LIKE  '$orgnztId$%'
	</select>


		<update id="userManageDAO.eminwonInfoUpdateUser" parameterClass="userManageVO">
				UPDATE
					 RFC_COMTNMANAGER
			SET 
					AREA_NO=SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#areaNo#),
					MIDDLETEL_NO=SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#middleTelno#), 
					ENDTEL_NO=SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#endTelno#),
					OFFMTEL_NO=#offmTelno#,
					FX_NUM=#fxnum#,
					EMAIL_ADRES=SCP.ENC_STR(#damoUser#,'RFC_COMTNMANAGER',#damoKey#,#emailAdres#),
					OFCPS_NM=#ofcpsNm#,
					MODIFY_DATE=sysdate
				where
						EMPLYR_ID=#emplyrId#
	</update>
</sqlMap>