/**
 * Utility functions for web applications.
 *
 * @author Dave Longley
 *
 * Copyright (c) 2010-2014 Digital Bazaar, Inc.
 */
!function(){function t(t){function e(t){if(this.data="",this.read=0,"string"==typeof t)this.data=t;else if(n.isArrayBuffer(t)||n.isArrayBufferView(t)){var r=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,r)}catch(a){for(var i=0;i<r.length;++i)this.putByte(r[i])}}else(t instanceof e||"object"==typeof t&&"string"==typeof t.data&&"number"==typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}function r(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=n.isArrayBuffer(t),a=n.isArrayBufferView(t);return r||a?(this.data=r?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength)):(this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==t&&void 0!==t&&this.putBytes(t),void("writeOffset"in e&&(this.write=e.writeOffset)))}var n=t.util=t.util||{};!function(){function t(t){if(t.source===window&&t.data===e){t.stopPropagation();var n=r.slice();r.length=0,n.forEach(function(t){t()})}}if("undefined"!=typeof process&&process.nextTick)return n.nextTick=process.nextTick,void(n.setImmediate="function"==typeof setImmediate?setImmediate:n.nextTick);if("function"==typeof setImmediate)return n.setImmediate=setImmediate,void(n.nextTick=function(t){return setImmediate(t)});if(n.setImmediate=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",r=[];n.setImmediate=function(t){r.push(t),1===r.length&&window.postMessage(e,"*")},window.addEventListener("message",t,!0)}if("undefined"!=typeof MutationObserver){var a=Date.now(),i=!0,o=document.createElement("div"),r=[];new MutationObserver(function(){var t=r.slice();r.length=0,t.forEach(function(t){t()})}).observe(o,{attributes:!0});var f=n.setImmediate;n.setImmediate=function(t){Date.now()-a>15?(a=Date.now(),f(t)):(r.push(t),1===r.length&&o.setAttribute("a",i=!i))}}n.nextTick=n.setImmediate}(),n.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},n.isArrayBuffer=function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer},n.isArrayBufferView=function(t){return t&&n.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},n.ByteBuffer=e,n.ByteStringBuffer=e;var a=4096;n.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>a&&(this.data.substr(0,1),this._constructedStringLength=0)},n.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},n.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},n.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},n.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)1&e&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this},n.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},n.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(n.encodeUtf8(t))},n.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},n.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},n.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},n.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},n.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},n.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},n.ByteStringBuffer.prototype.putInt=function(t,e){var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)},n.ByteStringBuffer.prototype.putSignedInt=function(t,e){return 0>t&&(t+=2<<e-1),this.putInt(t,e)},n.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},n.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},n.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},n.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},n.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},n.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},n.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},n.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},n.ByteStringBuffer.prototype.getInt=function(t){var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e},n.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},n.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},n.ByteStringBuffer.prototype.bytes=function(t){return"undefined"==typeof t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},n.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},n.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},n.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},n.ByteStringBuffer.prototype.copy=function(){var t=n.createBuffer(this.data);return t.read=this.read,t},n.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},n.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},n.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},n.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);16>r&&(t+="0"),t+=r.toString(16)}return t},n.ByteStringBuffer.prototype.toString=function(){return n.decodeUtf8(this.bytes())},n.DataBuffer=r,n.DataBuffer.prototype.length=function(){return this.write-this.read},n.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},n.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this},n.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},n.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;e>r;++r)this.data.setUint8(t);return this},n.DataBuffer.prototype.putBytes=function(t,e){if(n.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),a=r.byteLength-r.byteOffset;this.accommodate(a);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=a,this}if(n.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof n.DataBuffer||"object"==typeof t&&"number"==typeof t.read&&"number"==typeof t.write&&n.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof n.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"==typeof t){var o;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=n.binary.hex.decode(t,o,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),o=new Uint8Array(this.data.buffer,this.write),this.write+=n.binary.base64.decode(t,o,this.write),this;if("utf8"===e&&(t=n.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=n.binary.raw.decode(o),this;if("utf16"===e)return this.accommodate(2*t.length),o=new Uint16Array(this.data.buffer,this.write),this.write+=n.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},n.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},n.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},n.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},n.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},n.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},n.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},n.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},n.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},n.DataBuffer.prototype.putInt=function(t,e){this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this},n.DataBuffer.prototype.putSignedInt=function(t,e){return this.accommodate(e/8),0>t&&(t+=2<<e-1),this.putInt(t,e)},n.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},n.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},n.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},n.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},n.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},n.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},n.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},n.DataBuffer.prototype.getInt=function(t){var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e},n.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},n.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},n.DataBuffer.prototype.bytes=function(t){return"undefined"==typeof t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},n.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},n.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},n.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},n.DataBuffer.prototype.copy=function(){return new n.DataBuffer(this)},n.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},n.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},n.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},n.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);16>r&&(t+="0"),t+=r.toString(16)}return t},n.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8","binary"===t||"raw"===t)return n.binary.raw.encode(e);if("hex"===t)return n.binary.hex.encode(e);if("base64"===t)return n.binary.base64.encode(e);if("utf8"===t)return n.text.utf8.decode(e);if("utf16"===t)return n.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},n.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=n.encodeUtf8(t)),new n.ByteBuffer(t)},n.fillString=function(t,e){for(var r="";e>0;)1&e&&(r+=t),e>>>=1,e>0&&(t+=t);return r},n.xorBytes=function(t,e,r){for(var n="",a="",i="",o=0,f=0;r>0;--r,++o)a=t.charCodeAt(o)^e.charCodeAt(o),f>=10&&(n+=i,i="",f=0),i+=String.fromCharCode(a),++f;return n+=i},n.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t.substr(0,1),16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},n.bytesToHex=function(t){return n.createBuffer(t).toHex()},n.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];n.encode64=function(t,e){for(var r,n,a,o="",f="",u=0;u<t.length;)r=t.charCodeAt(u++),n=t.charCodeAt(u++),a=t.charCodeAt(u++),o+=i.charAt(r>>2),o+=i.charAt((3&r)<<4|n>>4),isNaN(n)?o+="==":(o+=i.charAt((15&n)<<2|a>>6),o+=isNaN(a)?"=":i.charAt(63&a)),e&&o.length>e&&(f+=o.substr(0,e)+"\r\n",o=o.substr(e));return f+=o},n.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,r,n,a,i="",f=0;f<t.length;)e=o[t.charCodeAt(f++)-43],r=o[t.charCodeAt(f++)-43],n=o[t.charCodeAt(f++)-43],a=o[t.charCodeAt(f++)-43],i+=String.fromCharCode(e<<2|r>>4),64!==n&&(i+=String.fromCharCode((15&r)<<4|n>>2),64!==a&&(i+=String.fromCharCode((3&n)<<6|a)));return i},n.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},n.decodeUtf8=function(t){return decodeURIComponent(escape(t))},n.binary={raw:{},hex:{},base64:{}},n.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},n.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var a=r,i=0;i<t.length;++i)n[a++]=t.charCodeAt(i);return e?a-r:n},n.binary.hex.encode=n.bytesToHex,n.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var a=0,i=r;for(1&t.length&&(a=1,n[i++]=parseInt(t[0],16));a<t.length;a+=2)n[i++]=parseInt(t.substr(a,2),16);return e?i-r:n},n.binary.base64.encode=function(t,e){for(var r,n,a,o="",f="",u=0;u<t.byteLength;)r=t[u++],n=t[u++],a=t[u++],o+=i.charAt(r>>2),o+=i.charAt((3&r)<<4|n>>4),isNaN(n)?o+="==":(o+=i.charAt((15&n)<<2|a>>6),o+=isNaN(a)?"=":i.charAt(63&a)),e&&o.length>e&&(f+=o.substr(0,e)+"\r\n",o=o.substr(e));return f+=o},n.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var a,i,f,u,s=0,h=r;s<t.length;)a=o[t.charCodeAt(s++)-43],i=o[t.charCodeAt(s++)-43],f=o[t.charCodeAt(s++)-43],u=o[t.charCodeAt(s++)-43],n[h++]=a<<2|i>>4,64!==f&&(n[h++]=(15&i)<<4|f>>2,64!==u&&(n[h++]=(3&f)<<6|u));return e?h-r:n.subarray(0,h)},n.text={utf8:{},utf16:{}},n.text.utf8.encode=function(t,e,r){t=n.encodeUtf8(t);var a=e;a||(a=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)a[i++]=t.charCodeAt(o);return e?i-r:a},n.text.utf8.decode=function(t){return n.decodeUtf8(String.fromCharCode.apply(null,t))},n.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(2*t.length));var a=new Uint16Array(n.buffer);r=r||0;for(var i=r,o=r,f=0;f<t.length;++f)a[o++]=t.charCodeAt(f),i+=2;return e?i-r:n},n.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},n.deflate=function(t,e,r){if(e=n.decode64(t.deflate(n.encode64(e)).rval),r){var a=2,i=e.charCodeAt(1);32&i&&(a=6),e=e.substring(a,e.length-4)}return e},n.inflate=function(t,e){var r=t.inflate(n.encode64(e)).rval;return null===r?null:n.decode64(r)};var f=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var a;if(null===r?a=t.removeItem(e):(r=n.encode64(JSON.stringify(r)),a=t.setItem(e,r)),"undefined"!=typeof a&&a.rval!==!0){var i=new Error(a.error.message);throw i.id=a.error.id,i.name=a.error.name,i}},u=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(null===r.rval){if(r.error){var a=new Error(r.error.message);throw a.id=r.error.id,a.name=r.error.name,a}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(n.decode64(r))),r},s=function(t,e,r,n){var a=u(t,e);null===a&&(a={}),a[r]=n,f(t,e,a)},h=function(t,e,r){var n=u(t,e);return null!==n&&(n=r in n?n[r]:null),n},d=function(t,e,r){var n=u(t,e);if(null!==n&&r in n){delete n[r];var a=!0;for(var i in n){a=!1;break}a&&(n=null),f(t,e,n)}},c=function(t,e){f(t,e,null)},p=function(t,e,r){var n=null;"undefined"==typeof r&&(r=["web","flash"]);var a,i=!1,o=null;for(var f in r){a=r[f];try{if("flash"===a||"both"===a){if(null===e[0])throw new Error("Flash local storage not available.");n=t.apply(this,e),i="flash"===a}("web"===a||"both"===a)&&(e[0]=localStorage,n=t.apply(this,e),i=!0)}catch(u){o=u}if(i)break}if(!i)throw o;return n};n.setItem=function(t,e,r,n,a){p(s,arguments,a)},n.getItem=function(t,e,r,n){return p(h,arguments,n)},n.removeItem=function(t,e,r,n){p(d,arguments,n)},n.clearItems=function(t,e,r){p(c,arguments,r)},n.parseUrl=function(t){var e=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;e.lastIndex=0;var r=e.exec(t),n=null===r?null:{full:t,scheme:r[1],host:r[2],port:r[3],path:r[4]};return n&&(n.fullHost=n.host,n.port?80!==n.port&&"http"===n.scheme?n.fullHost+=":"+n.port:443!==n.port&&"https"===n.scheme&&(n.fullHost+=":"+n.port):"http"===n.scheme?n.port=80:"https"===n.scheme&&(n.port=443),n.full=n.scheme+"://"+n.fullHost),n};var y=null;n.getQueryVariables=function(t){var e,r=function(t){for(var e={},r=t.split("&"),n=0;n<r.length;n++){var a,i,o=r[n].indexOf("=");o>0?(a=r[n].substring(0,o),i=r[n].substring(o+1)):(a=r[n],i=null),a in e||(e[a]=[]),a in Object.prototype||null===i||e[a].push(unescape(i))}return e};return"undefined"==typeof t?(null===y&&(y="undefined"!=typeof window&&window.location&&window.location.search?r(window.location.search.substring(1)):{}),e=y):e=r(t),e},n.parseFragment=function(t){var e=t,r="",a=t.indexOf("?");a>0&&(e=t.substring(0,a),r=t.substring(a+1));var i=e.split("/");i.length>0&&""===i[0]&&i.shift();var o=""===r?{}:n.getQueryVariables(r);return{pathString:e,queryString:r,path:i,query:o}},n.makeRequest=function(t){var e=n.parseFragment(t),r={path:e.pathString,query:e.queryString,getPath:function(t){return"undefined"==typeof t?e.path:e.path[t]},getQuery:function(t,r){var n;return"undefined"==typeof t?n=e.query:(n=e.query[t],n&&"undefined"!=typeof r&&(n=n[r])),n},getQueryLast:function(t,e){var n,a=r.getQuery(t);return n=a?a[a.length-1]:e}};return r},n.makeLink=function(t,e,r){t=jQuery.isArray(t)?t.join("/"):t;var n=jQuery.param(e||{});return r=r||"",t+(n.length>0?"?"+n:"")+(r.length>0?"#"+r:"")},n.setPath=function(t,e,r){if("object"==typeof t&&null!==t)for(var n=0,a=e.length;a>n;){var i=e[n++];if(n==a)t[i]=r;else{var o=i in t;(!o||o&&"object"!=typeof t[i]||o&&null===t[i])&&(t[i]={}),t=t[i]}}},n.getPath=function(t,e,r){for(var n=0,a=e.length,i=!0;i&&a>n&&"object"==typeof t&&null!==t;){var o=e[n++];i=o in t,i&&(t=t[o])}return i?t:r},n.deletePath=function(t,e){if("object"==typeof t&&null!==t)for(var r=0,n=e.length;n>r;){var a=e[r++];if(r==n)delete t[a];else{if(!(a in t)||"object"!=typeof t[a]||null===t[a])break;t=t[a]}}},n.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},n.format=function(t){for(var e,r,n=/%./g,a=0,i=[],o=0;e=n.exec(t);){r=t.substring(o,n.lastIndex-2),r.length>0&&i.push(r),o=n.lastIndex;var f=e[0][1];switch(f){case"s":case"o":i.push(a<arguments.length?arguments[a++ +1]:"<?>");break;case"%":i.push("%");break;default:i.push("<%"+f+"?>")}}return i.push(t.substring(o)),i.join("")},n.formatNumber=function(t,e,r,n){var a=t,i=isNaN(e=Math.abs(e))?2:e,o=void 0===r?",":r,f=void 0===n?".":n,u=0>a?"-":"",s=parseInt(a=Math.abs(+a||0).toFixed(i),10)+"",h=s.length>3?s.length%3:0;return u+(h?s.substr(0,h)+f:"")+s.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+f)+(i?o+Math.abs(a-s).toFixed(i).slice(2):"")},n.formatSize=function(t){return t=t>=1073741824?n.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?n.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?n.formatNumber(t/1024,0)+" KiB":n.formatNumber(t,0)+" bytes"},n.bytesFromIP=function(t){return-1!==t.indexOf(".")?n.bytesFromIPv4(t):-1!==t.indexOf(":")?n.bytesFromIPv6(t):null},n.bytesFromIPv4=function(t){if(t=t.split("."),4!==t.length)return null;for(var e=n.createBuffer(),r=0;r<t.length;++r){var a=parseInt(t[r],10);if(isNaN(a))return null;e.putByte(a)}return e.getBytes()},n.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(t){return 0===t.length&&++e,!0});for(var r=2*(8-t.length+e),a=n.createBuffer(),i=0;8>i;++i)if(t[i]&&0!==t[i].length){var o=n.hexToBytes(t[i]);o.length<2&&a.putByte(0),a.putBytes(o)}else a.fillWithByte(0,r),r=0;return a.getBytes()},n.bytesToIP=function(t){return 4===t.length?n.bytesToIPv4(t):16===t.length?n.bytesToIPv6(t):null},n.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")},n.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],r=[],a=0,i=0;i<t.length;i+=2){for(var o=n.bytesToHex(t[i]+t[i+1]);"0"===o[0]&&"0"!==o;)o=o.substr(1);if("0"===o){var f=r[r.length-1],u=e.length;f&&u===f.end+1?(f.end=u,f.end-f.start>r[a].end-r[a].start&&(a=r.length-1)):r.push({start:u,end:u})}e.push(o)}if(r.length>0){var s=r[a];s.end-s.start>0&&(e.splice(s.start,s.end-s.start+1,""),0===s.start&&e.unshift(""),7===s.end&&e.push(""))}return e.join(":")},n.estimateCores=function(t,e){function r(t,f,u){if(0===f){var s=Math.floor(t.reduce(function(t,e){return t+e},0)/t.length);return n.cores=Math.max(1,s),URL.revokeObjectURL(o),e(null,n.cores)}a(u,function(e,n){t.push(i(u,n)),r(t,f-1,u)})}function a(t,e){for(var r=[],n=[],a=0;t>a;++a){var i=new Worker(o);i.addEventListener("message",function(a){if(n.push(a.data),n.length===t){for(var i=0;t>i;++i)r[i].terminate();e(null,n)}}),r.push(i)}for(var a=0;t>a;++a)r[a].postMessage(a)}function i(t,e){for(var r=[],n=0;t>n;++n)for(var a=e[n],i=r[n]=[],o=0;t>o;++o)if(n!==o){var f=e[o];(a.st>f.st&&a.st<f.et||f.st>a.st&&f.st<a.et)&&i.push(o)}return r.reduce(function(t,e){return Math.max(t,e.length)},0)}if("function"==typeof t&&(e=t,t={}),t=t||{},"cores"in n&&!t.update)return e(null,n.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return n.cores=navigator.hardwareConcurrency,e(null,n.cores);if("undefined"==typeof Worker)return n.cores=1,e(null,n.cores);if("undefined"==typeof Blob)return n.cores=2,e(null,n.cores);var o=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(){for(var t=Date.now(),e=t+4;Date.now()<e;);self.postMessage({st:t,et:e})})}.toString(),")()"],{type:"application/javascript"}));r([],5,16)}}var e="util";if("function"!=typeof define){if("object"!=typeof module||!module.exports)return"undefined"==typeof forge&&(forge={}),t(forge);var r=!0;define=function(t,e){e(require,module)}}var n,a=function(r,a){a.exports=function(a){var i=n.map(function(t){return r(t)}).concat(t);if(a=a||{},a.defined=a.defined||{},a.defined[e])return a[e];a.defined[e]=!0;for(var o=0;o<i.length;++o)i[o](a);return a[e]}},i=define;define=function(t,e){return n="string"==typeof t?e.slice(2):t.slice(2),r?(delete define,i.apply(null,Array.prototype.slice.call(arguments,0))):(define=i,define.apply(null,Array.prototype.slice.call(arguments,0)))},define(["require","module"],function(){a.apply(null,Array.prototype.slice.call(arguments,0))})}();