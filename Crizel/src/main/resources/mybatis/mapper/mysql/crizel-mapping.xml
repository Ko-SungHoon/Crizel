<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="crizel">
	<select id="list" resultType="com.crizel.common.CrizelVo" parameterType="String">
		SELECT * 
		FROM ANI 
		WHERE DAY=#{day} 
		ORDER BY ANI_TIME
	</select>

	<insert id="listInsert" parameterType="com.crizel.common.CrizelVo">
		INSERT INTO ANI(ANI_ID, TITLE, ANI_TIME, DAY, KEYWORD, SITE)
		VALUES((SELECT ANI_ID FROM (SELECT IFNULL(MAX(ANI_ID)+1,1) AS ANI_ID FROM ANI) ANI), #{title}, #{ani_time}, #{day},
		#{keyword}, #{site})
	</insert>
	
	<select id="listInsertDetail" resultType="com.crizel.common.CrizelVo">
		SELECT * FROM ANI;
	</select>
	
	<select id="aniInfo" parameterType="String" resultType="com.crizel.common.CrizelVo">
		SELECT *
		FROM ANI
		WHERE ANI_ID = #{ani_id}
	</select>
	
	<update id="listUpdate" parameterType="com.crizel.common.CrizelVo">
		UPDATE ANI SET
			TITLE = #{title}
			, ANI_TIME = #{ani_time}
			, DAY = #{day}
			, KEYWORD = #{keyword}
			, SITE = #{site}
		WHERE ANI_ID = #{ani_id}
	</update>
	

	<delete id="listDelete" parameterType="com.crizel.common.CrizelVo">
		DELETE FROM ANI WHERE
		ANI_ID=#{ani_id}
	</delete>

	<select id="login" parameterType="com.crizel.common.CrizelVo" resultType="com.crizel.common.CrizelVo">
		SELECT * FROM LOGIN WHERE ID=#{id} AND PW=#{pw}
	</select>

	<insert id="register" parameterType="com.crizel.common.CrizelVo">
		INSERT INTO LOGIN
		VALUES(#{id}, #{pw}, #{name}, #{email}, #{phone}, #{nick},
		DATE_FORMAT(NOW(),'%Y-%m-%d'))
	</insert>

	<select id="registerCheck" parameterType="String" resultType="String">
		SELECT ID FROM LOGIN WHERE ID=#{re_id}
	</select>
	
	<select id="onejav" parameterType="String" resultType="HashMap">
		SELECT NO
			, DAY
			, TITLE
			, ADDR
			, IMG
			, NAME
		FROM ONEJAV
		WHERE DAY = #{day}
	</select>
</mapper>